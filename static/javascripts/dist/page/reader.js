define("nireader/nireader-fe/2.0.0/page/reader",["../module/stateManager","../kit/url","../kit/customEvent","../module/page","../module/createContent","../content/home","../kit/resource","../kit/request","../kit/cache","../config","../interface/index","../kit/notice","../kit/userinfo","../kit/cookie","../kit/eventList","../template/home/title","../template/template","../kit/time","../kit/num","../template/home/info","../template/home/subscriptionList","../template/home/recommendList","../template/home/channelInfo","../content/entrance","../content/channel","../template/channel/title","../template/channel/info","../template/channel/itemList","../content/item","../template/item/title","../template/item/info","../template/item/content","../template/item/channelTitle","../kit/testScroll","../module/floater","../kit/keypress","../kit/pattern","../template/common/result","../template/common/tip","../template/common/loadingIcon"],function(a,b,c){var d=a("../module/stateManager"),e=a("../module/page");a("../module/floater");var f=function(){d.on("checkout",function(a){e.checkout(a)})};c.exports={name:"reader",init:f}}),define("nireader/nireader-fe/2.0.0/module/stateManager",["nireader/nireader-fe/2.0.0/kit/url","nireader/nireader-fe/2.0.0/kit/customEvent"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/kit/url").format,e=a("nireader/nireader-fe/2.0.0/kit/customEvent"),f=function(){this.handlers={},this.init()};f.prototype.init=function(){this.bindEvent()},f.prototype.bindEvent=function(){var a=this,b=function(b){b=d(b),a.pushState({url:b,title:"Loading"}),a.checkout()};$("body").delegate("[data-link-async]","click",function(a){a.preventDefault();var c=$(this);return c.attr("disabled")?!1:(b(c.attr("href")),void 0)}),e.on("goto",b),window.onpopstate=function(){a.checkout()}},f.prototype.pushState=function(a){history.pushState(a,a.title,a.url)},f.prototype.checkout=function(){this.trigger("checkout")},f.prototype.on=function(a,b){this.handlers[a]=this.handlers[a]||[],this.handlers[a].push(b)},f.prototype.trigger=function(a){var b=this.handlers[a],c=Array.prototype.slice.call(arguments,1);if(b)for(var d=0,e=b.length;e>d;d++)try{b[d].apply(this,c)}catch(f){console.warn(f),console.log(f.stack)}},c.exports=new f}),define("nireader/nireader-fe/2.0.0/kit/url",[],function(a,b){var c=function(a){var b=a.indexOf("://");return 0>b?a:(a=a.slice(b+3),b=a.indexOf("/"),0>b?"/":a.slice(b))},d=function(a){return a.indexOf("/")?location.pathname.replace(/([\w\d\_]*)$/,a):a},e=function(a){return a?(a=c(a),a=d(a)):null},f=function(a){var b=/\/([\w]*)(\/([\w]+))?($|\?)/,c={};if(b.test(a)){var d=b.exec(a);c.type=d[1],d[3]&&(c.id=parseInt(d[3],10))}return c},g=function(a){return a.indexOf("://")<0?!0:0===a.indexOf(location.origin)?!0:!1};b.format=e,b.parse=f,b.isSameDomain=g}),define("nireader/nireader-fe/2.0.0/kit/customEvent",[],function(a,b,c){var d={};c.exports={on:function(a,b){var c=d[a]=d[a]||[];c.indexOf(b)>=0||c.push(b)},off:function(a,b){var c,e;(c=d[a])&&(e=c.indexOf(b))>=0&&c.splice(e,1)},trigger:function(a){var b;if(b=d[a])for(var c=0,e=b.length;e>c;c++)try{b[c].apply(null,Array.prototype.slice.call(arguments,1))}catch(f){console.log(f.stack)}}}}),define("nireader/nireader-fe/2.0.0/module/page",["nireader/nireader-fe/2.0.0/module/createContent","nireader/nireader-fe/2.0.0/kit/url","nireader/nireader-fe/2.0.0/content/home","nireader/nireader-fe/2.0.0/kit/resource","nireader/nireader-fe/2.0.0/kit/request","nireader/nireader-fe/2.0.0/kit/cache","nireader/nireader-fe/2.0.0/config","nireader/nireader-fe/2.0.0/interface/index","nireader/nireader-fe/2.0.0/kit/notice","nireader/nireader-fe/2.0.0/kit/userinfo","nireader/nireader-fe/2.0.0/kit/cookie","nireader/nireader-fe/2.0.0/kit/eventList","nireader/nireader-fe/2.0.0/kit/customEvent","nireader/nireader-fe/2.0.0/template/home/title","nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num","nireader/nireader-fe/2.0.0/template/home/info","nireader/nireader-fe/2.0.0/template/home/subscriptionList","nireader/nireader-fe/2.0.0/template/home/recommendList","nireader/nireader-fe/2.0.0/template/home/channelInfo","nireader/nireader-fe/2.0.0/content/entrance","nireader/nireader-fe/2.0.0/content/channel","nireader/nireader-fe/2.0.0/template/channel/title","nireader/nireader-fe/2.0.0/template/channel/info","nireader/nireader-fe/2.0.0/template/channel/itemList","nireader/nireader-fe/2.0.0/content/item","nireader/nireader-fe/2.0.0/template/item/title","nireader/nireader-fe/2.0.0/template/item/info","nireader/nireader-fe/2.0.0/template/item/content","nireader/nireader-fe/2.0.0/template/item/channelTitle","nireader/nireader-fe/2.0.0/kit/testScroll"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/module/createContent"),e=a("nireader/nireader-fe/2.0.0/kit/url"),f={wrapper:$("#body"),middleBlock:$("#middle-block")};f.getUrl=function(){this.url=e.format(location.href)},f.initContent=function(){this.content=d({url:this.url,wrapper:this.wrapper}),this.content.init()},f.init=function(){this.getUrl(),this.initContent(),this.middleBlock.animate({scrollTop:0},300)},f.clean=function(){this.content&&this.content.clean(),this.content=null},f.checkout=function(){this.clean(),this.init()},c.exports=f}),define("nireader/nireader-fe/2.0.0/module/createContent",["nireader/nireader-fe/2.0.0/kit/url","nireader/nireader-fe/2.0.0/content/home","nireader/nireader-fe/2.0.0/kit/resource","nireader/nireader-fe/2.0.0/kit/request","nireader/nireader-fe/2.0.0/kit/cache","nireader/nireader-fe/2.0.0/config","nireader/nireader-fe/2.0.0/interface/index","nireader/nireader-fe/2.0.0/kit/notice","nireader/nireader-fe/2.0.0/kit/userinfo","nireader/nireader-fe/2.0.0/kit/cookie","nireader/nireader-fe/2.0.0/kit/eventList","nireader/nireader-fe/2.0.0/kit/customEvent","nireader/nireader-fe/2.0.0/template/home/title","nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num","nireader/nireader-fe/2.0.0/template/home/info","nireader/nireader-fe/2.0.0/template/home/subscriptionList","nireader/nireader-fe/2.0.0/template/home/recommendList","nireader/nireader-fe/2.0.0/template/home/channelInfo","nireader/nireader-fe/2.0.0/content/entrance","nireader/nireader-fe/2.0.0/content/channel","nireader/nireader-fe/2.0.0/template/channel/title","nireader/nireader-fe/2.0.0/template/channel/info","nireader/nireader-fe/2.0.0/template/channel/itemList","nireader/nireader-fe/2.0.0/content/item","nireader/nireader-fe/2.0.0/template/item/title","nireader/nireader-fe/2.0.0/template/item/info","nireader/nireader-fe/2.0.0/template/item/content","nireader/nireader-fe/2.0.0/template/item/channelTitle","nireader/nireader-fe/2.0.0/kit/testScroll"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/kit/url"),e={home:a("nireader/nireader-fe/2.0.0/content/home"),welcome:a("nireader/nireader-fe/2.0.0/content/entrance"),channel:a("nireader/nireader-fe/2.0.0/content/channel"),item:a("nireader/nireader-fe/2.0.0/content/item")},f=function(a){var b=a.type||d.parse(a.url).type||"home",c=e[b];return c?new c(a):null};c.exports=f}),define("nireader/nireader-fe/2.0.0/content/home",["nireader/nireader-fe/2.0.0/kit/resource","nireader/nireader-fe/2.0.0/kit/request","nireader/nireader-fe/2.0.0/kit/cache","nireader/nireader-fe/2.0.0/config","nireader/nireader-fe/2.0.0/kit/url","nireader/nireader-fe/2.0.0/interface/index","nireader/nireader-fe/2.0.0/kit/notice","nireader/nireader-fe/2.0.0/kit/userinfo","nireader/nireader-fe/2.0.0/kit/cookie","nireader/nireader-fe/2.0.0/kit/eventList","nireader/nireader-fe/2.0.0/kit/customEvent","nireader/nireader-fe/2.0.0/template/home/title","nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num","nireader/nireader-fe/2.0.0/template/home/info","nireader/nireader-fe/2.0.0/template/home/subscriptionList","nireader/nireader-fe/2.0.0/template/home/recommendList","nireader/nireader-fe/2.0.0/template/home/channelInfo"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/kit/resource"),e=a("nireader/nireader-fe/2.0.0/kit/request"),f=a("nireader/nireader-fe/2.0.0/kit/notice"),g=a("nireader/nireader-fe/2.0.0/kit/userinfo"),h=a("nireader/nireader-fe/2.0.0/kit/eventList"),i=a("nireader/nireader-fe/2.0.0/kit/customEvent"),j=a("nireader/nireader-fe/2.0.0/interface/index"),k=j.api,l=j.page,m=a("nireader/nireader-fe/2.0.0/template/home/title"),n=a("nireader/nireader-fe/2.0.0/template/home/info"),o=a("nireader/nireader-fe/2.0.0/template/home/subscriptionList"),p=a("nireader/nireader-fe/2.0.0/template/home/recommendList"),q=a("nireader/nireader-fe/2.0.0/template/home/channelInfo"),r=$("title"),s=function(a){this.url=a.url,this.wrapper=a.wrapper,this.eventList=h.create("content/home"),this.type="home"};s.prototype.init=function(){g.isLogin(function(a){a||(location.href=l.entrance)}),this.prepareInfo(),this.initDoms(),this.getAllSubscriptionList(),this.getRecommendList(),this.getUserInfo(),this.dealLinks(),this.bindEvent()},s.prototype.bindEvent=function(){var a=this;this.eventList.add(i,"userInfoUpdate",function(){a.refreshSubscriptionList()})},s.prototype.clean=function(){this.eventList.clean(),this.doms.sideContent.html(""),this.doms.sideBlock.clearQueue().stop().hide(),this.doms.leftLink.attr("href","").show(),this.doms.rightLink.attr("href","").show(),this.doms.topLink.attr("href","").show()},s.prototype.prepareInfo=function(){var a=this;a.data={},a.doms={wrapper:a.wrapper,middleBlock:a.wrapper.find("#middle-block"),title:a.wrapper.find("#title"),info:a.wrapper.find("#info"),content:a.wrapper.find("#content"),sideBlock:a.wrapper.find("#side-block"),sideContent:a.wrapper.find("#side-content"),leftLink:a.wrapper.find("#left-link"),rightLink:a.wrapper.find("#right-link"),topLink:a.wrapper.find("#top-link")},a.sideBlock=a.genSideBlock()},s.prototype.initDoms=function(){},s.prototype.genSideBlock=function(){var a,b=this,c=b.doms.middleBlock,g=b.doms.sideBlock,h=b.doms.sideContent,i=function(){g.addClass("loading")},j=function(a){g.removeClass("loading"),h.html(a)},l=function(a){var b=a.offset().top+c.scrollTop(),d=parseInt(g.css("top"),10);g.stop().clearQueue().show().delay(200).animate({top:(6*b-d)/5},100).animate({top:b},50)},m=function(){a=setTimeout(function(){g.hide()},200)},n=function(){a&&(a=clearTimeout(a))},o=function(a,c){c.addClass("icon-spinner icon-spin"),e.post({subscribee:a},k.subscription.add,function(a){c.removeClass("icon-spinner icon-spin"),a?(f("订阅失败"),console.warn(a)):(c.addClass("icon-eye-open").removeClass("icon-eye-close"),b.refreshSubscriptionList())})},p=function(a,c){c.addClass("icon-spinner icon-spin"),e.post({subscribee:a},k.subscription.remove,function(a){c.removeClass("icon-spinner icon-spin"),a?(f("取消订阅失败"),console.warn(a)):(c.addClass("icon-eye-close").removeClass("icon-eye-open"),b.refreshSubscriptionList(),m())})},r=function(a){var c=g.find("#channel-subscribed");b.eventList.add(c,"click",function(){(c.hasClass("icon-eye-open")?p:o)(a,c)})},s=function(){n();var a=$(this),c=a.attr("data-id");g.attr("data-cid",c),l(a),i(),d.get("channel",{id:c},function(a,d){if(g.attr("data-cid")==c){if(a)return j("Get channel info failed."),void 0;for(var e=b.data.subscriptions.length-1;e>=0;e--)if(b.data.subscriptions[e].id==d.id){d.subscribed=!0;break}j(q({channel:d})),r(c)}})},t=function(a){b.eventList.add(a.find(".item"),"mouseenter",s),b.eventList.add(a,"mouseleave",m)};return b.eventList.add(g,"mouseenter",n),b.eventList.add(g,"mouseleave",m),{bind:t}},s.prototype.getUserInfo=function(){var a=this;d.get("user",{},function(b,c){return b?(console.error(b||"Can not get user info."),void 0):(a.dealUserInfo(c),void 0)})},s.prototype.dealUserInfo=function(a){this.data.user=a,this.renderHomeInfo({user:a})},s.prototype.dealLinks=function(){this.doms.topLink.hide(),this.doms.leftLink.hide(),this.doms.rightLink.hide()},s.prototype.getSubscriptionListByPage=function(a){var b=this;d.makeList("subscription",{},function(c,d){return c?(console.error(c),void 0):(b.data.subscriptionListPage=a,b.dealSubscriptionList(d),void 0)})(a)},s.prototype.getAllSubscriptionList=function(a){var b=this;d.makeList("subscription",{},function(a,c){return a?(console.error(a),void 0):(b.dealSubscriptionList(c),void 0)},null,null,a)({})},s.prototype.refreshSubscriptionList=function(){this.doms.subscriptionList&&this.doms.subscriptionList.remove(),this.getAllSubscriptionList(!0)},s.prototype.dealSubscriptionList=function(a){this.data.subscriptions=a,this.renderSubscriptionList({subscriptions:a})},s.prototype.getRecommendList=function(){var a=this;d.makeList("channel",{},function(b,c){return b?(console.error(b),void 0):(a.dealRecommendList(c),void 0)})(1)},s.prototype.dealRecommendList=function(a){this.data.recommends=a,this.renderRecommendList({recommends:a})},s.prototype.renderHomeInfo=function(a){r.text(a.user.name+"'s reader"),this.doms.title.html(m(a)),this.doms.info.html(n(a))},s.prototype.renderSubscriptionList=function(a){this.recommendListReady?this.doms.content.prepend(o(a)):this.doms.content.html(o(a)),this.subscriptionListReady=!0,this.doms.subscriptionList=this.doms.content.find("#subscription-list"),this.sideBlock.bind(this.doms.subscriptionList)},s.prototype.renderRecommendList=function(a){this.subscriptionListReady?this.doms.content.append(p(a)):this.doms.content.html(p(a)),this.recommendListReady=!0,this.doms.recommendList=this.doms.content.find("#recommend-list"),this.sideBlock.bind(this.doms.recommendList)},c.exports=s}),define("nireader/nireader-fe/2.0.0/kit/resource",["nireader/nireader-fe/2.0.0/kit/request","nireader/nireader-fe/2.0.0/kit/cache","nireader/nireader-fe/2.0.0/config","nireader/nireader-fe/2.0.0/kit/url","nireader/nireader-fe/2.0.0/interface/index"],function(a,b){var c=a("nireader/nireader-fe/2.0.0/kit/request"),d=a("nireader/nireader-fe/2.0.0/kit/cache");a("nireader/nireader-fe/2.0.0/kit/url").format;var e=a("nireader/nireader-fe/2.0.0/interface/index").api,f={resource:36e5,list:6e4},g={item:e.item.get,channel:e.channel.get,user:e.user.get},h={item:{order:"pubDate",descrease:!0},channel:{order:"id",descrease:!1},user:{order:"name",descrease:!1}},i=function(a,b,e,i){if(a&&"string"==typeof a){var j={type:a,opt:b,sort:i},k={opt:b,sort:i||h[a]},l=g[a];c.get(k,l,function(a,b){a||d.set(j,b,f.resource),e&&e(a,b)})}},j=function(a,b,e,i,j){if(a&&"string"==typeof a){var k,l={cache:"resource",type:a,opt:b,sort:i};if(!j&&(k=d.get(l)))return e&&e(null,k),void 0;var m={opt:b,sort:i||h[a]},n=g[a];c.get(m,n,function(a,b){a||d.set(l,b,f.resource),e&&e(a,b)})}},k={item:e.item.list,channel:e.channel.list,subscription:e.subscription.list},l={item:["id","pubDate","title","source"],channel:["id","pubDate","title"],subscription:["channel.id","channel.pubDate","channel.title","channel.description","channel.generator"]},m={item:{order:"pubDate",descrease:!0},channel:{order:"id",descrease:!1},subscription:{order:"channel.id",descrease:!1}},n={item:20,channel:20,subscription:20},o=function(a,b,e,g,h,i,j){if(a&&"string"==typeof a){var o,p={cache:"list",type:a,opt:b,sort:h};if(!j&&(o=d.get(p)))return g&&g(null,o),void 0;var q,r=n[a];"object"==typeof e&&(q=e);var s={opt:b,fields:i||l[a],sort:h||m[a],limit:q||(r?{from:r*(e-1),num:r}:null)},t=k[a];c.get(s,t,function(a,b){a||d.set(p,b,f.list),g&&g(a,b)})}},p=function(a,b,c,d,e,f){return function(g){return o(a,b,g,c,d,e,f)}},q={item:e.item.search,channel:e.channel.search,subscription:e.subscription.search},r=function(a,b,d,e,f,g){if(a&&"string"==typeof a){var h,i=n[a];"object"==typeof d&&(h=d);var j={keywords:b,fields:g||l[a],sort:f||m[a],limit:h||(i?{from:i*(d-1),num:i}:null)},k=q[a];c.get(j,k,e)}},s=function(a,b,c,d,e){return function(f){return r(a,b,f,c,d,e)}};b.refresh=i,b.get=j,b.list=o,b.search=r,b.makeList=p,b.makeSearch=s}),define("nireader/nireader-fe/2.0.0/kit/request",[],function(a,b){var c=3,d=function(a,b,e,f,g){"string"==typeof b&&(g=f,f=e,e=b,b=null),$.ajax(e,{data:b,type:a,dataType:"json",headers:{isAjax:!0},success:function(a){f&&f(a.err,a.data)},error:function(h){g===!0&&(g=c),"number"==typeof g&&g>0?d(a,b,e,f,--g):f&&f(h,null)}})};b.post=function(a,b,c,e){d("post",a,b,c,e)},b.get=function(a,b,c,e){d("get",a,b,c,e)}}),define("nireader/nireader-fe/2.0.0/kit/cache",["nireader/nireader-fe/2.0.0/config"],function(a,b,c){var d,e=a("nireader/nireader-fe/2.0.0/config").cache,f=e.manageInterval,g=e.lifetime,h=e.maxNum,i={},j=[],k=function(){window.LOG.apply(window,arguments),d&&clearTimeout(d),d=setTimeout(function(){window.LOG("storage: ",i,"hotList: ",j),d=null},10)},l=function(a,b){var c=j.indexOf(a);c>=0&&j.splice(c,1),b||j.push(a)},m=function(a,b,c){a=JSON.stringify(a),b=JSON.stringify(b),l(a),k("cache: ",a),i[a]={cnt:b,doom:Date.now()+(c||g)}},n=function(a){a=JSON.stringify(a);var b=i[a];return k((b?"catch":"miss")+" in cache: ",a),b?(l(a),JSON.parse(b.cnt)):void 0},o=function(){k("manage cache...");var a=Date.now();for(var b in i)i.hasOwnProperty(b)&&a>i[b].doom&&(l(b,!0),k("cache expired: ",b),delete i[b]);for(var b,c=j.length-h,d=0;c>d;d++)b=j[d],k("cache over num: ",b),delete i[b];j=j.slice(c,j.length),k("manage cache end.")},p=function(){setInterval(o,f)};p(),c.exports={set:m,get:n}}),define("nireader/nireader-fe/2.0.0/config",[],function(a,b,c){c.exports={cache:{manageInterval:6e4,lifetime:6e4,maxNum:200}}}),define("nireader/nireader-fe/2.0.0/interface/index",[],function(a,b,c){var d={channel:{get:"/api/channel",list:"/api/list/channel",search:"/api/search/channel",create:"/api/channel/create",save:"/api/channel/save"},item:{get:"/api/item",list:"/api/list/item",search:"/api/search/item"},subscription:{get:"/api/subscription",list:"/api/list/subscription",add:"/api/subscription/add",remove:"/api/subscription/remove"},user:{get:"/api/user"},auth:{"in":"/api/signin",out:"/api/signout"}},e={home:"/",entrance:"/welcome",channel:function(a){return"/channel/"+a},item:function(a){return"/item/"+a}};c.exports={api:d,page:e}}),define("nireader/nireader-fe/2.0.0/kit/notice",[],function(a,b,c){c.exports=function(a){"string"!=typeof a&&(a=JSON.stringify(a)),console.log(a)}}),define("nireader/nireader-fe/2.0.0/kit/userinfo",["nireader/nireader-fe/2.0.0/kit/cookie"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/kit/cookie"),e="WhoAmI",f=function(a){a&&a(!!d.get(e))};c.exports={isLogin:f}}),define("nireader/nireader-fe/2.0.0/kit/cookie",[],function(a,b){var c=function(a){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(a)},d=function(a){if(c(a)){var b=new RegExp("(^| )"+a+"=([^;]*)(;|$)"),d=b.exec(document.cookie);if(d)return d[2]||null}return null},e=function(a){var b=d(a);return"string"==typeof b?b=decodeURIComponent(b):null};b.get=e}),define("nireader/nireader-fe/2.0.0/kit/eventList",[],function(a,b,c){var d={};window.lists=d;var e=function(a){a+=(Math.random()+"").slice(2);var b=d[a]=[];return LOG("create eventList: ",a),{name:a,list:b,add:function(a,c,d){LOG("add event: ",c," to ",this);for(var e=b.length-1;e>=0;e--)if(b[e].dom===a&&b[e].event===c&&b[e].handler===d)return;try{a.on(c,d),b.push({dom:a,event:c,handler:d})}catch(f){console.log(f.stack)}return b},remove:function(a,c,d){LOG("remove event: ",c," from ",this);for(var e=b.length-1;e>=0;e--)if(b[e].dom===a&&b[e].event===c&&b[e].handler===d){try{a.off(c,d),b.splice(e,1)}catch(f){console.log(f.stack)}break}},clean:function(){LOG("clean eventList: ",this);for(var c,e=b.length-1;e>=0;e--)try{c=b[e],c.dom.off(c.event,c.handler)}catch(f){console.log(f.stack)}b=d[a]=[],delete d[a]}}};c.exports={create:e}}),define("nireader/nireader-fe/2.0.0/template/home/title",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e="<%=user.name%>";c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/template",["nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/kit/time").format;template.helper("formatTime",d),c.exports=template}),define("nireader/nireader-fe/2.0.0/kit/time",["nireader/nireader-fe/2.0.0/kit/num"],function(a,b){var c=a("nireader/nireader-fe/2.0.0/kit/num").toLength,d=function(){var a=new Date;return a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),a},e=(new Date).getFullYear(),f=d();setInterval(function(){e=(new Date).getFullYear(),f=d()},6e4);var g=function(a,b){var c=new Date(a.valueOf());return c.setDate(c.getDate()-b),c},h=["今天","昨天","天前"],i=["零","一","两","三","四","五"],j=function(a){if(a>f)return h[0];if(a>g(f,1))return h[1];for(var b=2;5>=b;b++)if(a>g(f,b))return i[b]+h[2];var d="",j=a.getFullYear(),k=c(a.getMonth()+1,2),l=c(a.getDate(),2);return j!==e&&(d+=j+"年"),d+=k+"月"+l+"日"},k=function(a){return c(a.getHours(),2)+":"+c(a.getMinutes(),2)},l=function(a,b){var c=new Date(a);return b=void 0===b?"":b,j(c)+b+k(c)};b.formatDate=j,b.formatDay=k,b.format=l}),define("nireader/nireader-fe/2.0.0/kit/num",[],function(a,b){var c=function(a,b){var c=(a+"").slice(0,b);if(c.length<b)for(var d=c.length;b>d;d++)c="0"+c;return c},d=function(a,b){("number"!=typeof b||1>b)&&(b=1);var c=a.toFixed(b),d=/[0]+$/,e=/\.$/;return c.replace(d,"").replace(e,"")},e=function(a,b){a=a||0,b=b||100;var c=Math.random()*(b-a);return Math.floor(c+a)};b.toLength=c,b.format=d,b.random=e}),define("nireader/nireader-fe/2.0.0/template/home/info",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<% if(user.description){ %><span class="mr20 ml150" title="<%=user.description%>"><%=user.description%></span><% } %><% if(user.homepage){ %><a class="mr20" href="<%=user.homepage%>" target="_blank" title="页面">SITE</a><% } %>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/home/subscriptionList",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<ul id="subscription-list" class="item-list"><%if(subscriptions && subscriptions.length > 0){%><h6 class="sub-title">Subscriptions: </h6><%for(i = 0; i < subscriptions.length; i ++) {%><li class="item" data-id="<%=subscriptions[i].id%>"><a data-link-async="true" href="/channel/<%=subscriptions[i].id%>"><%=subscriptions[i].title%></a><span class="pubdate"><%="更新于" + formatTime(subscriptions[i].pubDate, " ")%></span></li><%}%><%}else{%><h6 class="sub-title">No subscription yet, </h6><%}%></ul>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/home/recommendList",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<h6 class="sub-title">Here are some recommends:</h6><ul id="recommend-list" class="item-list"><%for(i = 0; i < recommends.length; i ++) {%><li class="item" data-id="<%=recommends[i].id%>"><a data-link-async="true" href="/channel/<%=recommends[i].id%>"><%=recommends[i].title%></a><span class="pubdate"><%="更新于" + formatTime(recommends[i].pubDate, " ")%></span></li><%}%></ul>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/home/channelInfo",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<h3 class="channel-title"><%=channel.title%><i id="channel-subscribed" class="icon-eye-<%=channel.subscribed?"open":"close"%>" title="<%=channel.subscribed?"已订阅":"未订阅"%>"></i></h3><p class="channel-description"><%=channel.description%></p><p class="channel-generator"><%=channel.generator%></p>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/content/entrance",["nireader/nireader-fe/2.0.0/kit/request","nireader/nireader-fe/2.0.0/kit/customEvent","nireader/nireader-fe/2.0.0/kit/notice","nireader/nireader-fe/2.0.0/kit/userinfo","nireader/nireader-fe/2.0.0/kit/cookie","nireader/nireader-fe/2.0.0/kit/eventList","nireader/nireader-fe/2.0.0/interface/index"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/kit/request"),e=a("nireader/nireader-fe/2.0.0/kit/customEvent"),f=a("nireader/nireader-fe/2.0.0/kit/notice"),g=a("nireader/nireader-fe/2.0.0/kit/userinfo"),h=a("nireader/nireader-fe/2.0.0/kit/eventList"),i=a("nireader/nireader-fe/2.0.0/interface/index"),j=i.api,k=i.page,l=$("title"),m=function(){e.trigger("goto",k.home)},n=function(a){this.url=a.url,this.eventList=h.create("content/entrance"),this.type="entrance"};n.prototype.init=function(){g.isLogin(function(a){a&&m()}),this.prepareInfo(),l.text("Welcome"),this.dealLinks(),this.bindEvent()},n.prototype.dealLinks=function(){this.doms.topLink.hide(),this.doms.leftLink.hide(),this.doms.rightLink.hide()},n.prototype.bindEvent=function(){var a=this,b=this.doms;this.eventList.add(b.signin,"click",function(){return b.signinBlock.fadeIn(),!1}),this.eventList.add(b.submit,"click",function(){a.signIn()}),this.eventList.add(b.passwordIN,"keyup",function(b){13===b.which&&a.signIn()})},n.prototype.signIn=function(){var a=this.doms.nameIn.val(),b=this.doms.passwordIN.val();a&&b&&d.post({username:a,password:b},j.auth.in,function(a){return a?(f(a),void 0):(m(),void 0)})},n.prototype.clean=function(){this.eventList.clean(),this.doms.wrapper.animate({marginTop:-this.doms.wrapper.height()+"px"},1e3,function(){$(this).hide()})},n.prototype.prepareInfo=function(){this.doms={wrapper:$("#header"),leftLink:$("#left-link"),rightLink:$("#right-link"),topLink:$("#top-link"),signin:$("#signin"),signinBlock:$("#signin-block"),nameIn:$("#name-in"),passwordIN:$("#password-in"),submit:$("#submit")}},c.exports=n}),define("nireader/nireader-fe/2.0.0/content/channel",["nireader/nireader-fe/2.0.0/kit/resource","nireader/nireader-fe/2.0.0/kit/request","nireader/nireader-fe/2.0.0/kit/cache","nireader/nireader-fe/2.0.0/config","nireader/nireader-fe/2.0.0/kit/url","nireader/nireader-fe/2.0.0/interface/index","nireader/nireader-fe/2.0.0/kit/eventList","nireader/nireader-fe/2.0.0/kit/userinfo","nireader/nireader-fe/2.0.0/kit/cookie","nireader/nireader-fe/2.0.0/template/channel/title","nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num","nireader/nireader-fe/2.0.0/template/channel/info","nireader/nireader-fe/2.0.0/template/channel/itemList"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/kit/resource"),e=a("nireader/nireader-fe/2.0.0/interface/index").page,f=a("nireader/nireader-fe/2.0.0/kit/url"),g=a("nireader/nireader-fe/2.0.0/kit/eventList"),h=a("nireader/nireader-fe/2.0.0/kit/userinfo"),i=a("nireader/nireader-fe/2.0.0/template/channel/title"),j=a("nireader/nireader-fe/2.0.0/template/channel/info"),k=a("nireader/nireader-fe/2.0.0/template/channel/itemList"),l=$("title"),m=function(a){this.url=a.url,this.wrapper=a.wrapper,this.eventList=g.create("content/channel"),this.type="channel"};m.prototype.init=function(){this.prepareInfo(),this.getItemListByPage(1),this.getChannelInfo();var a=this;h.isLogin(function(b){b?a.getNeighbourInfo():a.dealNoUserinfo()}),this.bindEvent()},m.prototype.bindEvent=function(){},m.prototype.clean=function(){this.eventList.clean(),this.doms.sideContent.html(""),this.doms.sideBlock.clearQueue().stop().hide(),this.doms.leftLink.attr("href",""),this.doms.rightLink.attr("href",""),this.doms.topLink.attr("href","")},m.prototype.prepareInfo=function(){var a=this;a.data={id:parseInt(f.parse(a.url).id,10)},a.doms={wrapper:a.wrapper,middleBlock:a.wrapper.find("#middle-block"),title:a.wrapper.find("#title"),info:a.wrapper.find("#info"),content:a.wrapper.find("#content"),sideBlock:a.wrapper.find("#side-block"),sideContent:a.wrapper.find("#side-content"),leftLink:a.wrapper.find("#left-link"),rightLink:a.wrapper.find("#right-link"),topLink:a.wrapper.find("#top-link")},a.getItemListByPage=d.makeList("item",{source:a.data.id},function(b,c){return b?(console.error(b),void 0):(a.dealItemList(c),void 0)})},m.prototype.getChannelInfo=function(){var a=this;d.get("channel",{id:a.data.id},function(b,c){return b?(console.error(b||"No such channel"),void 0):(a.dealChannelInfo(c),void 0)})},m.prototype.dealChannelInfo=function(a){this.data.channel=a,this.renderChannelInfo({channel:a})},m.prototype.getNeighbourInfo=function(){var a=this;d.list("subscription",null,{from:0},function(b,c){if(b||c.length<1)return console.error(b||"Get aside channel info fail."),void 0;for(var d=-1,e=0,f=c.length;f>e;e++)if(parseInt(c[e].id,10)===a.data.id){d=e;break}a.dealNeighbourInfo({prev:c[d-1],next:c[d+1]})})},m.prototype.dealNeighbourInfo=function(a){this.doms.topLink.attr("href",e.home).attr("title","Home"),a.prev?this.doms.leftLink.attr("href",e.channel(a.prev.id)).attr("title",a.prev.title).show():this.doms.leftLink.hide(),a.next?this.doms.rightLink.attr("href",e.channel(a.next.id)).attr("title",a.next.title).show():this.doms.rightLink.hide()},m.prototype.dealNoUserinfo=function(){this.doms.topLink.attr("href",e.home).attr("title","Home"),this.doms.leftLink.hide(),this.doms.rightLink.hide()},m.prototype.dealItemList=function(a){this.data.items=a,this.renderItemList({items:a})},m.prototype.renderChannelInfo=function(a){this.doms.title.html(i(a)),this.doms.info.html(j(a)),l.text(a.channel.title)},m.prototype.sideBlockLoading=function(){this.doms.sideBlock.addClass("loading")},m.prototype.sideBlockLoad=function(a){this.doms.sideBlock.removeClass("loading"),this.doms.sideContent.html(a)},m.prototype.sideBlockGoto=function(a){var b=a.offset().top+this.doms.middleBlock.scrollTop(),c=parseInt(this.doms.sideBlock.css("top"),10);this.doms.sideBlock.stop().clearQueue().show().delay(200).animate({top:(6*b-c)/5},100).animate({top:b},50)},m.prototype.renderItemList=function(a){var b=this;b.doms.content.html(k(a));var c;this.eventList.add(b.doms.content.find(".item"),"mouseenter",function(){c&&(c=clearTimeout(c));var a=$(this),e=parseInt(a.attr("data-id"),10);b.doms.sideBlock.attr("data-iid",e),b.sideBlockGoto(a),b.sideBlockLoading(),d.get("item",{id:e},function(a,c){return b.doms.sideBlock.attr("data-iid")==e?a?(b.sideBlockLoad("Get item info failed."),void 0):(b.sideBlockLoad(c.content),void 0):void 0})}),this.eventList.add(b.doms.content,"mouseleave",function(){c=setTimeout(function(){b.doms.sideBlock.hide()},200)})},c.exports=m}),define("nireader/nireader-fe/2.0.0/template/channel/title",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e="<%=channel.title%>";c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/channel/info",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<% if(channel.description){ %><span class="mr20 ml150" title="<%=channel.description%>"><%=channel.description%></span><% } %><span class="mr20">@ <%=formatTime(channel.pubDate)%></span><a class="mr20" href="<%=channel.link%>" target="_blank" title="访问网站">SITE</a>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/channel/itemList",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<ul class="item-list"><%for(i = 0; i < items.length; i ++) {%><li class="item" data-id="<%=items[i].id%>"><a data-link-async="true" href="/item/<%=items[i].id%>"><%=items[i].title%></a><span class="pubdate"><%=formatTime(items[i].pubDate, " ")%></span></li><%}%></ul>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/content/item",["nireader/nireader-fe/2.0.0/kit/resource","nireader/nireader-fe/2.0.0/kit/request","nireader/nireader-fe/2.0.0/kit/cache","nireader/nireader-fe/2.0.0/config","nireader/nireader-fe/2.0.0/kit/url","nireader/nireader-fe/2.0.0/interface/index","nireader/nireader-fe/2.0.0/kit/eventList","nireader/nireader-fe/2.0.0/template/item/title","nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num","nireader/nireader-fe/2.0.0/template/item/info","nireader/nireader-fe/2.0.0/template/item/content","nireader/nireader-fe/2.0.0/template/item/channelTitle","nireader/nireader-fe/2.0.0/kit/testScroll"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/kit/resource"),e=a("nireader/nireader-fe/2.0.0/interface/index").page,f=a("nireader/nireader-fe/2.0.0/kit/url"),g=a("nireader/nireader-fe/2.0.0/kit/eventList"),h=a("nireader/nireader-fe/2.0.0/template/item/title"),i=a("nireader/nireader-fe/2.0.0/template/item/info"),j=a("nireader/nireader-fe/2.0.0/template/item/content"),k=a("nireader/nireader-fe/2.0.0/template/item/channelTitle"),l=$("title"),m=a("nireader/nireader-fe/2.0.0/kit/testScroll"),n=m.bottom,o=m.top,p=function(a){this.url=a.url,this.wrapper=a.wrapper,this.eventList=g.create("content/item"),this.type="item"
};p.prototype.init=function(){var a=this;a.prepareInfo(),a.getItemInfo(function(){a.getChannelInfo(),a.getNeighbourInfo(function(){a.preloadNeighbours()})}),a.bindEvent()},p.prototype.bindEvent=function(){var a=this.data,b=this.doms.middleBlock,c=this.doms.leftLink,d=this.doms.rightLink,e=300,f=this.eventList.add,g=this.eventList.remove,h=function(a,b,d,e){e>0&&"none"!==c.css("display")&&c.click()},i=function(a,b,c,e){0>e&&"none"!==d.css("display")&&d.click()},j=!0;setTimeout(function(){f(b,"mousewheel",function(c,d,k,l){return g(b,"mousewheel",h),g(b,"mousewheel",i),j?(j=!1,void 0):(l>0&&o(b)&&(a.timer1=a.timer1||setTimeout(function(){f(b,"mousewheel",h),a.timer1=null},e)),0>l&&n(b)&&(a.timer2=a.timer2||setTimeout(function(){f(b,"mousewheel",i),a.timer2=null},e)),void 0)})},200)},p.prototype.clean=function(){this.eventList.clean(),clearTimeout(this.data.timer),clearTimeout(this.data.timer1),clearTimeout(this.data.timer2),this.doms.leftLink.attr("href",""),this.doms.rightLink.attr("href",""),this.doms.topLink.attr("href","")},p.prototype.prepareInfo=function(){var a=this;a.data={id:parseInt(f.parse(a.url).id,10)},a.doms={wrapper:a.wrapper,middleBlock:a.wrapper.find("#middle-block"),title:a.wrapper.find("#title"),info:a.wrapper.find("#info"),content:a.wrapper.find("#content"),leftLink:a.wrapper.find("#left-link"),rightLink:a.wrapper.find("#right-link"),topLink:a.wrapper.find("#top-link")}},p.prototype.getItemInfo=function(a){var b=this;d.get("item",{id:b.data.id},function(c,d){return c?(console.error(c||"No such item"),void 0):(b.dealItemInfo(d),a&&a(),void 0)})},p.prototype.getChannelInfo=function(){var a=this;d.get("channel",{id:a.data.item.source},function(b,c){return b?(console.error(b||"Can not get channel"),void 0):(a.dealChannelInfo(c),void 0)})},p.prototype.preloadNeighbours=function(){var a;(a=this.data.neighbours.prev)&&d.get("item",{id:a.id}),(a=this.data.neighbours.next)&&d.get("item",{id:a.id})},p.prototype.dealItemInfo=function(a){this.data.item=a,this.renderItemInfo({item:a})},p.prototype.dealChannelInfo=function(a){this.data.channel=a,this.renderChannelInfo({channel:a})},p.prototype.getNeighbourInfo=function(a){var b=this;d.list("item",{source:b.data.item.source},{from:0},function(c,d){if(c||d.length<1)return console.error(c||"Get aside item info fail."),void 0;for(var e=-1,f=0,g=d.length;g>f;f++)if(parseInt(d[f].id,10)===b.data.id){e=f;break}b.dealNeighbourInfo({prev:d[e-1],next:d[e+1]}),a&&a()})},p.prototype.dealNeighbourInfo=function(a){this.data.neighbours=a,a.prev?this.doms.leftLink.attr("href",e.item(a.prev.id)).attr("title",a.prev.title).show():this.doms.leftLink.hide(),a.next?this.doms.rightLink.attr("href",e.item(a.next.id)).attr("title",a.next.title).show():this.doms.rightLink.hide()},p.prototype.renderItemInfo=function(a){l.text(a.item.title),this.doms.title.html(h(a)),this.doms.info.html(i(a)),this.doms.content.html(j(a)),this.doms.topLink.attr("href",e.channel(a.item.source))},p.prototype.renderChannelInfo=function(a){this.doms.topLink.attr("title",a.channel.title),this.doms.info.prepend(k(a))},c.exports=p}),define("nireader/nireader-fe/2.0.0/template/item/title",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e="<%=item.title%>";c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/item/info",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<span class="mr40">@ <%=formatTime(item.pubDate)%></span><a class="mr40" href="<%=item.link%>" target="_blank" title="原文">ORIGIN</a>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/item/content",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e="<%==item.content%>";c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/item/channelTitle",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<span class="">From <a href="/channel/<%=channel.id%>" title="<%=channel.description%>" data-link-async=true ><%=channel.title%> </a></span>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/kit/testScroll",[],function(a,b){b.bottom=function(a){return a=a[0]||a,a&&a.scrollTop+a.clientHeight>=a.scrollHeight},b.top=function(a){return a=a[0]||a,a&&a.scrollTop<=0}}),define("nireader/nireader-fe/2.0.0/module/floater",["nireader/nireader-fe/2.0.0/kit/keypress","nireader/nireader-fe/2.0.0/kit/pattern","nireader/nireader-fe/2.0.0/kit/request","nireader/nireader-fe/2.0.0/kit/resource","nireader/nireader-fe/2.0.0/kit/cache","nireader/nireader-fe/2.0.0/config","nireader/nireader-fe/2.0.0/kit/url","nireader/nireader-fe/2.0.0/interface/index","nireader/nireader-fe/2.0.0/kit/notice","nireader/nireader-fe/2.0.0/kit/customEvent","nireader/nireader-fe/2.0.0/template/common/result","nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num","nireader/nireader-fe/2.0.0/template/common/tip","nireader/nireader-fe/2.0.0/template/common/loadingIcon"],function(a){var b,c,d,e=a("nireader/nireader-fe/2.0.0/kit/keypress"),f=a("nireader/nireader-fe/2.0.0/kit/pattern"),g=a("nireader/nireader-fe/2.0.0/kit/request"),h=a("nireader/nireader-fe/2.0.0/kit/resource"),i=a("nireader/nireader-fe/2.0.0/kit/notice"),j=a("nireader/nireader-fe/2.0.0/kit/url"),k=a("nireader/nireader-fe/2.0.0/kit/customEvent"),l=a("nireader/nireader-fe/2.0.0/interface/index"),m=l.api,n=l.page,o=a("nireader/nireader-fe/2.0.0/template/common/result"),p=a("nireader/nireader-fe/2.0.0/template/common/tip"),q=a("nireader/nireader-fe/2.0.0/template/common/loadingIcon")(),r=$("#body"),s=$("#floater"),t=$("#input"),u=$("#tips"),v=$("#results"),w=function(){b=t.val().trim()},x=function(){t.val("").focus(),Q(),u.hide(),v.hide()},y=function(){r.addClass("blur"),s.addClass("show"),x(),w()},z=function(){r.removeClass("blur"),s.removeClass("show")},A=function(){s.hasClass("show")?z():y()},B=function(){k.trigger("userInfoUpdate")},C=function(){v.html("").hide()},D=function(){u.html("").hide()},E=function(){D(),C()},F=function(a){u.show().prepend(p({tip:{word:a}}))},G=function(a){D(),F(a)},H=function(a,b,c){b=b||"javascript:;";var d=j.isSameDomain(b)?"":"_blank";v.show().append(o({result:{word:a,link:b,target:d,async:c}}))},I=function(a,b){g.post({url:a},m.channel.create,b)},J=function(a,b){g.post({channel:a},m.channel.save,b)},K=function(a,b){g.post({subscribee:a,description:""},m.subscription.add,b)},L=function(){var a=t.val();G("A feed url? parsing... "+q),I(a,function(d,e){if(a===b){if(E(),d)return G("Failed to parse, invalid feed url."),void 0;var f=!!e.id;G("Press <b>Enter</b> to "+(f?"":"add & ")+"subscribe."),H(e.title,f?n.channel(e.id):e.link,f),c=function(){J(e,function(a,b){return a?(G("Failed to add channel. Please try again."),void 0):(G("Channel "+b.title+" added, subscribing... "+q),K(b.id,function(a){return a?(G("Failed to subscribe channel "+b.title+". Please try again."),void 0):(C(),G("Channel "+b.title+" subscribed."),B(),void 0)}),void 0)})}}})},M=function(){G("Press <b>Enter</b> to logout."),c=function(){G("logout ing... "+q),g.get(m.auth.out,function(a){return a?(i(a),void 0):(location.href=n.home,void 0)})}},N=function(){G("Press <b>Enter</b> to go to home ('/')."),c=function(){G("going to home... "+q),k.trigger("goto","/"),D()}},O=function(a){if(a){for(var c=a.split(" "),d=[],e=0,f=c.length;f>e;e++)c[e]&&d.push(c[e]);if(!d.length)return;h.search("channel",d,1,function(c,d){if(a===b&&!c)for(var e=0,f=d.length;f>e;e++)H(d[e].title,n.channel(d[e].id),!0)})}},P={logout:M,home:N},Q=function(){var a=t.val().trim();if(a!=b){if(b=a,E(),a&&P[a])return P[a](),void 0;if(a&&f.url.test(a))return L(),void 0;var c,e,g;if(a)for(var h in P)P.hasOwnProperty(h)&&(c=h.indexOf(a))>=0&&(g=h,e=h.slice(0,c)+"<b>"+a+"</b>"+h.slice(c+a.length)+"	 ---- Use <b>Tab</b>",F(e));d=g&&function(){t.val(g)},O(a)}};t.on("keydown",function(a){9===a.which&&(a.preventDefault(),d&&!d(a))}),t.on("keyup",function(a){return 13===a.which&&c&&!c(a)?(t.val(""),void 0):(Q(),void 0)}),e.register(27,function(){A()})}),define("nireader/nireader-fe/2.0.0/kit/keypress",[],function(a,b,c){var d={},e=function(a,b,c){var d=a+"";return d+=b?"+ctrl":"",d+=c?"+alt":""},f=function(a,b,c,f){var g=e(a,c,f);d[g]=d[g]||[],d[g].push(b)},g=function(a,b,c,f){var g=e(a,b,c);if(d[g])for(var h=d[g],i=0,j=h.length;j>i;i++)try{h[i](f)}catch(f){}};$("body").on("keyup",function(a){return g(a.which,a.ctrlKey,a.altKey,a),a.preventDefault(),!1}),c.exports={register:f,trigger:g}}),define("nireader/nireader-fe/2.0.0/kit/pattern",[],function(a,b,c){var d=/[a-z]+\:\/\/[\w]+\.[\w]+/;c.exports={url:d}}),define("nireader/nireader-fe/2.0.0/template/common/result",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<li class="result"><a href="<%=result.link%>" target="<%=result.target%>" <%=result.async?"data-link-async=true":""%>><%==result.word%></a></li>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/common/tip",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<li class="tip"><%==tip.word%></li>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.0.0/template/common/loadingIcon",["nireader/nireader-fe/2.0.0/template/template","nireader/nireader-fe/2.0.0/kit/time","nireader/nireader-fe/2.0.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.0.0/template/template"),e='<i class="icon-spinner icon-spin" style="<% if(size){ %>font-size:<%=size*2%>px;<% } %>"></i>',f=d.compile(e);c.exports=function(a){return a=a||{},f(a)}});
