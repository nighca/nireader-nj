define("nireader/nireader-fe/2.1.0/page/reader",["../module/stateManager","../kit/url","../kit/customEvent","../module/page","../module/createContent","../content/home","../kit/resource","../kit/request","../kit/cache","../kit/local","../config","../interface/index","../kit/notice","../template/common/notice","../template/template","../kit/time","../kit/num","../kit/effect","../template/common/loader","../kit/userinfo","../kit/cookie","../kit/eventList","../template/home/title","../template/home/info","../template/home/subscriptionList","../template/home/recommendList","../template/home/channelInfo","../content/entrance","../template/common/loadingIcon","../content/channel","../module/floater","../kit/keypress","../kit/pattern","../kit/customLink","../module/cmd","../template/common/result","../template/common/tip","../template/channel/title","../template/channel/info","../template/channel/itemList","../content/item","../template/item/title","../template/item/info","../template/item/content","../template/item/channelTitle","../kit/testScroll","../module/task","../module/tasks/logger","../module/tasks/cacheManager","../module/tasks/breath"],function(a,b,c){var d=a("../module/stateManager"),e=a("../module/page");a("../module/floater"),a("../module/task").add(a("../module/tasks/logger")).add(a("../module/tasks/cacheManager")).add(a("../module/tasks/breath")).run();var f=function(){d.on("checkout",function(a){e.checkout(a)})};c.exports={name:"reader",init:f}}),define("nireader/nireader-fe/2.1.0/module/stateManager",["nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/kit/customEvent"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/kit/url").format,e=a("nireader/nireader-fe/2.1.0/kit/customEvent"),f=function(){this.handlers={},this.init()};f.prototype.init=function(){this.bindEvent()},f.prototype.bindEvent=function(){var a=this,b=function(b){b=d(b),history.pushState?(a.pushState({url:b,title:"Loading"}),a.checkout()):location.href=b};$("body").delegate("[data-link-async]","click",function(a){var c=$(this);return c.attr("disabled")||!c.attr("href")?!1:(a.ctrlKey||(a.preventDefault(),b(c.attr("href"))),void 0)}),e.on("goto",b),e.on("goback",function(){history.back()});var c=window.onpopstate=function(){a.checkout()};navigator.userAgent.toLowerCase().indexOf("chrome")<0&&setTimeout(c,0)},f.prototype.pushState=function(a){history.pushState(a,a.title,a.url)},f.prototype.checkout=function(){this.trigger("checkout")},f.prototype.on=function(a,b){this.handlers[a]=this.handlers[a]||[],this.handlers[a].push(b)},f.prototype.trigger=function(a){var b=this.handlers[a],c=Array.prototype.slice.call(arguments,1);if(b)for(var d=0,e=b.length;e>d;d++)try{b[d].apply(this,c)}catch(f){console.warn(f),console.log(f.stack)}},c.exports=new f}),define("nireader/nireader-fe/2.1.0/kit/url",[],function(a,b){var c=function(a){return a.indexOf("://")>0},d=function(){return location.origin||[location.protocol,"//",location.hostname,location.port||""].join("")},e=function(a){var b=a.indexOf("://");return 0>b?a:(a=a.slice(b+3),b=a.indexOf("/"),0>b?"/":a.slice(b))},f=function(a){return a.indexOf("/")?location.pathname.replace(/([\w\d\_]*)$/,a):a},g=function(a){return a?(a=e(a),a=f(a)):null},h=function(a){var b=/\/([\w]*)(\/([\w]+))?($|\?|\#)/,c={};if(b.test(a)){var d=b.exec(a);c.type=d[1],d[3]&&(c.id=parseInt(d[3],10))}return c},i=function(a){return a.indexOf("://")<0?!0:0===a.indexOf(d())?!0:!1},j=function(a){return c(a)?a:d()+f(a)},k=function(a){for(var b,c={},d=/\+/g,e=/([^&;=]+)=?([^&;]*)/g,f=function(a){return decodeURIComponent(a.replace(d," "))},g=a.substring(1);b=e.exec(g);)c[f(b[1])]=f(b[2]);return c};b.format=g,b.parse=h,b.isSameDomain=i,b.complete=j,b.parseHash=k}),define("nireader/nireader-fe/2.1.0/kit/customEvent",[],function(a,b,c){var d={};c.exports={on:function(a,b){var c=d[a]=d[a]||[];c.indexOf(b)>=0||c.push(b)},off:function(a,b){var c,e;(c=d[a])&&(e=c.indexOf(b))>=0&&c.splice(e,1)},trigger:function(a){var b;if(b=d[a])for(var c=0,e=b.length;e>c;c++)try{b[c].apply(null,Array.prototype.slice.call(arguments,1))}catch(f){console.log(f.stack)}}}}),define("nireader/nireader-fe/2.1.0/module/page",["nireader/nireader-fe/2.1.0/module/createContent","nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/content/home","nireader/nireader-fe/2.1.0/kit/resource","nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/interface/index","nireader/nireader-fe/2.1.0/kit/notice","nireader/nireader-fe/2.1.0/template/common/notice","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num","nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/effect","nireader/nireader-fe/2.1.0/template/common/loader","nireader/nireader-fe/2.1.0/kit/userinfo","nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/kit/eventList","nireader/nireader-fe/2.1.0/template/home/title","nireader/nireader-fe/2.1.0/template/home/info","nireader/nireader-fe/2.1.0/template/home/subscriptionList","nireader/nireader-fe/2.1.0/template/home/recommendList","nireader/nireader-fe/2.1.0/template/home/channelInfo","nireader/nireader-fe/2.1.0/content/entrance","nireader/nireader-fe/2.1.0/template/common/loadingIcon","nireader/nireader-fe/2.1.0/content/channel","nireader/nireader-fe/2.1.0/module/floater","nireader/nireader-fe/2.1.0/kit/keypress","nireader/nireader-fe/2.1.0/kit/pattern","nireader/nireader-fe/2.1.0/kit/customLink","nireader/nireader-fe/2.1.0/module/cmd","nireader/nireader-fe/2.1.0/template/common/result","nireader/nireader-fe/2.1.0/template/common/tip","nireader/nireader-fe/2.1.0/template/channel/title","nireader/nireader-fe/2.1.0/template/channel/info","nireader/nireader-fe/2.1.0/template/channel/itemList","nireader/nireader-fe/2.1.0/content/item","nireader/nireader-fe/2.1.0/template/item/title","nireader/nireader-fe/2.1.0/template/item/info","nireader/nireader-fe/2.1.0/template/item/content","nireader/nireader-fe/2.1.0/template/item/channelTitle","nireader/nireader-fe/2.1.0/kit/testScroll"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/module/createContent"),e=a("nireader/nireader-fe/2.1.0/kit/url"),f=a("nireader/nireader-fe/2.1.0/kit/notice"),g={wrapper:$("#body"),middleBlock:$("#middle-block")};g.getUrl=function(){this.url=e.format(location.href)},g.initContent=function(){this.content=d({url:this.url,wrapper:this.wrapper}),this.content.init()},g.init=function(){this.getUrl(),this.initContent(),this.middleBlock.animate({scrollTop:0},300)},g.clean=function(){f.clean(),this.content&&this.content.clean(),this.content=null},g.checkout=function(){var a=this;a.clean(),setTimeout(function(){a.init()},0)},c.exports=g}),define("nireader/nireader-fe/2.1.0/module/createContent",["nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/content/home","nireader/nireader-fe/2.1.0/kit/resource","nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/interface/index","nireader/nireader-fe/2.1.0/kit/notice","nireader/nireader-fe/2.1.0/template/common/notice","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num","nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/effect","nireader/nireader-fe/2.1.0/template/common/loader","nireader/nireader-fe/2.1.0/kit/userinfo","nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/kit/eventList","nireader/nireader-fe/2.1.0/template/home/title","nireader/nireader-fe/2.1.0/template/home/info","nireader/nireader-fe/2.1.0/template/home/subscriptionList","nireader/nireader-fe/2.1.0/template/home/recommendList","nireader/nireader-fe/2.1.0/template/home/channelInfo","nireader/nireader-fe/2.1.0/content/entrance","nireader/nireader-fe/2.1.0/template/common/loadingIcon","nireader/nireader-fe/2.1.0/content/channel","nireader/nireader-fe/2.1.0/module/floater","nireader/nireader-fe/2.1.0/kit/keypress","nireader/nireader-fe/2.1.0/kit/pattern","nireader/nireader-fe/2.1.0/kit/customLink","nireader/nireader-fe/2.1.0/module/cmd","nireader/nireader-fe/2.1.0/template/common/result","nireader/nireader-fe/2.1.0/template/common/tip","nireader/nireader-fe/2.1.0/template/channel/title","nireader/nireader-fe/2.1.0/template/channel/info","nireader/nireader-fe/2.1.0/template/channel/itemList","nireader/nireader-fe/2.1.0/content/item","nireader/nireader-fe/2.1.0/template/item/title","nireader/nireader-fe/2.1.0/template/item/info","nireader/nireader-fe/2.1.0/template/item/content","nireader/nireader-fe/2.1.0/template/item/channelTitle","nireader/nireader-fe/2.1.0/kit/testScroll"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/kit/url"),e={home:a("nireader/nireader-fe/2.1.0/content/home"),welcome:a("nireader/nireader-fe/2.1.0/content/entrance"),channel:a("nireader/nireader-fe/2.1.0/content/channel"),item:a("nireader/nireader-fe/2.1.0/content/item")},f=function(a){var b=a.type||d.parse(a.url).type||"home",c=e[b];return c?new c(a):null};c.exports=f}),define("nireader/nireader-fe/2.1.0/content/home",["nireader/nireader-fe/2.1.0/kit/resource","nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/interface/index","nireader/nireader-fe/2.1.0/kit/notice","nireader/nireader-fe/2.1.0/template/common/notice","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num","nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/effect","nireader/nireader-fe/2.1.0/template/common/loader","nireader/nireader-fe/2.1.0/kit/userinfo","nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/kit/eventList","nireader/nireader-fe/2.1.0/template/home/title","nireader/nireader-fe/2.1.0/template/home/info","nireader/nireader-fe/2.1.0/template/home/subscriptionList","nireader/nireader-fe/2.1.0/template/home/recommendList","nireader/nireader-fe/2.1.0/template/home/channelInfo"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/kit/resource"),e=a("nireader/nireader-fe/2.1.0/kit/request"),f=a("nireader/nireader-fe/2.1.0/kit/notice").notice,g=a("nireader/nireader-fe/2.1.0/kit/userinfo"),h=a("nireader/nireader-fe/2.1.0/kit/eventList"),i=a("nireader/nireader-fe/2.1.0/kit/customEvent"),j=a("nireader/nireader-fe/2.1.0/kit/effect"),k=a("nireader/nireader-fe/2.1.0/interface/index"),l=k.api,m=k.page,n=a("nireader/nireader-fe/2.1.0/template/home/title"),o=a("nireader/nireader-fe/2.1.0/template/home/info"),p=a("nireader/nireader-fe/2.1.0/template/home/subscriptionList"),q=a("nireader/nireader-fe/2.1.0/template/home/recommendList"),r=a("nireader/nireader-fe/2.1.0/template/home/channelInfo"),s=$("title"),t=function(a){this.url=a.url,this.wrapper=a.wrapper,this.eventList=h.create("content/home"),this.type="home"};t.prototype.init=function(){g.isLogin(function(a){a||(location.href=m.entrance)}),this.prepareInfo(),this.initDoms(),this.getAllSubscriptionList(),this.getRecommendList(),this.getUserInfo(),this.dealLinks(),this.bindEvent()},t.prototype.bindEvent=function(){var a=this;this.eventList.add(i,"userInfoUpdate",function(){a.refreshSubscriptionList()})},t.prototype.clean=function(){this.eventList.clean(),this.doms.sideContent.html(""),this.doms.sideBlock.clearQueue().stop().hide(),this.doms.leftLink.attr("href","").show(),this.doms.rightLink.attr("href","").show(),this.doms.topLink.attr("href","").show(),j.bodyLoading()},t.prototype.prepareInfo=function(){var a=this;a.data={},a.doms={wrapper:a.wrapper,middleBlock:a.wrapper.find("#middle-block"),title:a.wrapper.find("#title"),info:a.wrapper.find("#info"),content:a.wrapper.find("#content"),sideBlock:a.wrapper.find("#side-block"),sideContent:a.wrapper.find("#side-content"),leftLink:a.wrapper.find("#left-link"),rightLink:a.wrapper.find("#right-link"),topLink:a.wrapper.find("#top-link")},a.sideBlock=a.genSideBlock()},t.prototype.initDoms=function(){},t.prototype.genSideBlock=function(){var a,b=this,c=b.doms.middleBlock,g=b.doms.sideBlock,h=b.doms.sideContent,i=function(){g.addClass("loading")},j=function(a){g.removeClass("loading"),h.html(a)},k=function(a){var b=a.offset().top+c.scrollTop(),d=parseInt(g.css("top"),10);g.stop().clearQueue().show().delay(200).animate({top:(6*b-d)/5},100).animate({top:b},50)},m=function(){a=setTimeout(function(){g.hide()},200)},n=function(){a&&(a=clearTimeout(a))},o=function(a,c){c.addClass("icon-spinner icon-spin"),e.post({subscribee:a},l.subscription.add,function(a){c.removeClass("icon-spinner icon-spin"),a?(f("没订阅成"),LOG(a)):(c.addClass("icon-eye-open").removeClass("icon-eye-close"),b.refreshSubscriptionList())})},p=function(a,c){c.addClass("icon-spinner icon-spin"),e.post({subscribee:a},l.subscription.remove,function(a){c.removeClass("icon-spinner icon-spin"),a?(f("没能取消订阅"),LOG(a)):(c.addClass("icon-eye-close").removeClass("icon-eye-open"),b.refreshSubscriptionList(),m())})},q=function(a){var c=g.find("#channel-subscribed");b.eventList.add(c,"click",function(){(c.hasClass("icon-eye-open")?p:o)(a,c)})},s=function(){n();var a=$(this),c=a.attr("data-id");g.attr("data-cid",c),k(a),i(),d.get("channel",{id:c},function(a,d){if(g.attr("data-cid")==c){if(a)return j("Get channel info failed."),void 0;for(var e=b.data.subscriptions.length-1;e>=0;e--)if(b.data.subscriptions[e].id==d.id){d.subscribed=!0;break}j(r({channel:d})),q(c)}})},t=function(a){b.eventList.add(a.find(".item"),"mouseenter",s),b.eventList.add(a,"mouseleave",m)};return b.eventList.add(g,"mouseenter",n),b.eventList.add(g,"mouseleave",m),{bind:t}},t.prototype.getUserInfo=function(){var a=this;d.get("user",{},function(b,c){return b?(console.error(b||"Can not get user info."),void 0):(a.dealUserInfo(c),void 0)})},t.prototype.dealUserInfo=function(a){this.data.user=a,this.renderHomeInfo({user:a})},t.prototype.dealLinks=function(){this.doms.topLink.hide(),this.doms.leftLink.hide(),this.doms.rightLink.hide()},t.prototype.getSubscriptionListByPage=function(a){var b=this;d.makeList("subscription",null,function(c,d){return c?(console.error(c),void 0):(b.data.subscriptionListPage=a,b.dealSubscriptionList(d),void 0)})(a)},t.prototype.getAllSubscriptionList=function(a){var b=this;d.makeList("subscription",null,function(a,c){return a?(console.error(a),void 0):(b.dealSubscriptionList(c),void 0)},null,null,a)()},t.prototype.refreshSubscriptionList=function(){this.doms.subscriptionList&&this.doms.subscriptionList.remove(),this.getAllSubscriptionList(!0)},t.prototype.dealSubscriptionList=function(a){a.map(function(a){return a.pageUrl=m.myChannel(a.id),a}),this.data.subscriptions=a,this.renderSubscriptionList({subscriptions:a})},t.prototype.getRecommendList=function(){var a=this;d.makeList("channel",null,function(b,c){return b?(console.error(b),void 0):(a.dealRecommendList(c),void 0)},{order:"score",descrease:!0})(1)},t.prototype.dealRecommendList=function(a){a.map(function(a){return a.pageUrl=m.recommendChannel(a.id),a}),this.data.recommends=a,this.renderRecommendList({recommends:a})},t.prototype.renderHomeInfo=function(a){s.text(a.user.name+"'s reader"),this.doms.title.html(n(a)),this.doms.info.html(o(a))},t.prototype.renderSubscriptionList=function(a){this.recommendListReady?this.doms.content.prepend(p(a)):this.doms.content.html(p(a)),this.subscriptionListReady=!0,this.data.ready||this.dealReady(),this.doms.subscriptionList=this.doms.content.find("#subscription-list"),this.sideBlock.bind(this.doms.subscriptionList),this.doms.subscriptionList.find(".item").each(function(a,b){parseInt((b=$(b)).attr("data-news"),10)>0&&setTimeout(function(){b.addClass("has-new")},500*Math.random())})},t.prototype.renderRecommendList=function(a){this.subscriptionListReady?this.doms.content.append(q(a)):this.doms.content.html(q(a)),this.recommendListReady=!0,this.doms.recommendList=this.doms.content.find("#recommend-list");var b=20;this.doms.recommendList.children().each(function(a,c){$(c).css("opacity",(b-a)/b)}),this.sideBlock.bind(this.doms.recommendList)},t.prototype.dealReady=function(){this.data.ready=!0,j.bodyUnloading()},c.exports=t}),define("nireader/nireader-fe/2.1.0/kit/resource",["nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/interface/index"],function(a,b){var c=a("nireader/nireader-fe/2.1.0/kit/request"),d=a("nireader/nireader-fe/2.1.0/kit/cache");a("nireader/nireader-fe/2.1.0/kit/url").format;var e=a("nireader/nireader-fe/2.1.0/interface/index").api,f=a("nireader/nireader-fe/2.1.0/config").resource,g=f.lifetime,h={item:e.item.get,channel:e.channel.get,user:e.user.get},i={item:{order:"pubDate",descrease:!0},channel:{order:"id",descrease:!1},user:{order:"name",descrease:!1}},j=function(a,b,e,f){if(a&&"string"==typeof a){var j={cache:"resource",type:a,opt:b,sort:f},k={opt:b,sort:f||i[a]},l=h[a];c.get(k,l,function(a,b){a||d.set(j,b,g.resource),e&&e(a,b)})}},k=function(a,b,e,f,j){if(a&&"string"==typeof a){var k,l={cache:"resource",type:a,opt:b,sort:f};if(!j&&(k=d.get(l)))return e&&e(null,k),void 0;var m={opt:b,sort:f||i[a]},n=h[a];c.get(m,n,function(a,b){a||d.set(l,b,g.resource),e&&e(a,b)})}},l={item:e.item.list,channel:e.channel.list,subscription:e.subscription.list},m={item:["id","pubDate","title","source"],channel:["id","pubDate","title"],subscription:["channel.id","channel.pubDate","channel.title","news"]},n={item:{order:"pubDate",descrease:!0},channel:{order:"id",descrease:!1},subscription:{order:"channel.id",descrease:!1}},o={item:20,channel:20,subscription:20},p=function(a,b,e,f,h,i,j){if(a&&"string"==typeof a){var k,p={cache:"list",type:a,opt:b,sort:h};if(!j&&(k=d.get(p)))return f&&f(null,k),void 0;var q,r=o[a];q=e?"object"==typeof e?e:r?{from:r*(e-1),num:r}:null:null;var s={opt:b,fields:i||m[a],sort:h||n[a],limit:q},t=l[a];c.get(s,t,function(a,b){a||d.set(p,b,g.list),f&&f(a,b)})}},q=function(a,b,c,d,e,f){return function(g){return p(a,b,g,c,d,e,f)}},r={item:e.item.search,channel:e.channel.search,subscription:e.subscription.search},s=function(a,b,d,e,f,g){if(a&&"string"==typeof a){var h,i=o[a];"object"==typeof d&&(h=d);var j={keywords:b,fields:g||m[a],sort:f||n[a],limit:h||(i?{from:i*(d-1),num:i}:null)},k=r[a];c.get(j,k,e)}},t=function(a,b,c,d,e){return function(f){return s(a,b,f,c,d,e)}};b.refresh=j,b.get=k,b.list=p,b.search=s,b.makeList=q,b.makeSearch=t}),define("nireader/nireader-fe/2.1.0/kit/request",[],function(a,b){var c=3,d=function(a,b,e,f,g){"string"==typeof b&&(g=f,f=e,e=b,b=null),$.ajax(e,{data:b,type:a,dataType:"json",headers:{isAjax:!0},success:function(a){f&&f(a.err,a.data)},error:function(h){g===!0&&(g=c),"number"==typeof g&&g>0?d(a,b,e,f,--g):f&&f(h,null)}})};b.post=function(a,b,c,e){d("post",a,b,c,e)},b.get=function(a,b,c,e){d("get",a,b,c,e)}}),define("nireader/nireader-fe/2.1.0/kit/cache",["nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config"],function(a,b,c){var d,e=a("nireader/nireader-fe/2.1.0/kit/local").create("cache"),f=a("nireader/nireader-fe/2.1.0/config").cache,g=f.lifetime,h=f.maxNum,i={},j=[],k=function(){window.LOG.apply(window,arguments),d&&clearTimeout(d),d=setTimeout(function(){window.LOG("storage: ",i,"hotList: ",j),d=null},10)},l=function(a,b){var c=j.indexOf(a);c>=0&&j.splice(c,1),b||j.push(a)},m=function(a,b,c){a=JSON.stringify(a),b=JSON.stringify(b),l(a),k("cache: ",a),i[a]={cnt:b,doom:Date.now()+(c||g)}},n=function(a){a=JSON.stringify(a);var b=i[a];return k((b?"catch":"miss")+" in cache: ",a),b?(l(a),JSON.parse(b.cnt)):void 0},o=function(){LOG("clear begin: ",i),i={},j=[],e.clear(),LOG("clear end: ",i)},p=function(){return e.getSize()},q=function(){LOG("save to local begin: ",i),e.clear();for(var a in i)i.hasOwnProperty(a)&&e.set(a,JSON.stringify(i[a]));LOG("save to local: ",i),setTimeout(function(){LOG("local size: ",e.getSize())},100)},r=function(){LOG("load from local begin: ",i);var a,b=e.getAll(),c=Date.now();for(var d in b)b.hasOwnProperty(d)&&(a=JSON.parse(b[d]),c<a.doom&&(i[d]=a));LOG("load from local: ",i)};window.storage=i,window.local=e;var s=function(){k("manage cache...");var a=Date.now();for(var b in i)i.hasOwnProperty(b)&&a>i[b].doom&&(l(b,!0),k("cache expired: ",b),delete i[b]);for(var b,c=j.length-h,d=0;c>d;d++)b=j[d],k("cache over num: ",b),delete i[b];j=j.slice(c,j.length),q(),k("manage cache end.")};window.onbeforeunload=function(){q()},r(),c.exports={set:m,get:n,clear:o,getSize:p,manage:s}}),define("nireader/nireader-fe/2.1.0/kit/local",[],function(a,b,c){var d=function(a,b){return b+"$"+a},e=function(a,b){return a.slice(b.length+1)},f=function(a,b){return!b||0===a.indexOf(b+"$")},g=function(a,b,c){b=d(b,a);try{return localStorage[b]=c}catch(e){return LOG("set localStorage error: ",e),null}},h=function(a,b){return b=d(b,a),localStorage[b]},i=function(a,b){b=d(b,a),localStorage.removeItem(b)},j=function(a){for(var b,c,d={},g=0,h=localStorage.length;h>g;g++)b=localStorage.key(g),b&&f(b,a)&&(c=localStorage[b],d[e(b,a)]=c);return d},k=function(a){for(var b,c=localStorage.length-1;c>=0;c--)b=localStorage.key(c),b&&f(b,a)&&localStorage.removeItem(b)},l=function(a){for(var b,c,d=0,e=0,g=0,h=localStorage.length;h>g;g++)b=localStorage.key(g),b&&f(b,a)&&(d++,c=localStorage[b],e+=b.length+c.length);var i=2*e,j=i/1024,k=j/1024;return{num:d,length:e,B:i,KB:j.toFixed(2),MB:k.toFixed(2)}},m=function(a){return{get:function(b){return h(a,b)},remove:function(b){return i(a,b)},set:function(b,c){return g(a,b,c)},getAll:function(){return j(a)},clear:function(){return k(a)},getSize:function(){return l(a)}}};c.exports={create:m}}),define("nireader/nireader-fe/2.1.0/config",[],function(a,b,c){c.exports={cache:{manageInterval:6e4,lifetime:6e5,maxNum:100},resource:{lifetime:{resource:864e5,list:36e5}},auth:{qq:{clientId:"100544244",scope:"get_user_info"}}}}),define("nireader/nireader-fe/2.1.0/interface/index",[],function(a,b,c){var d={channel:{get:"/api/channel",list:"/api/list/channel",search:"/api/search/channel",create:"/api/channel/create",save:"/api/channel/save",vote:"/api/channel/vote"},item:{get:"/api/item",list:"/api/list/item",search:"/api/search/item"},subscription:{get:"/api/subscription",list:"/api/list/subscription",add:"/api/subscription/add",remove:"/api/subscription/remove",read:"/api/subscription/read"},user:{get:"/api/user"},auth:{"in":"/api/signin",out:"/api/signout"}},e={home:"/",entrance:"/welcome",channel:function(a){return"/channel/"+a},item:function(a){return"/item/"+a},myChannel:function(a){return"/my/channel/"+a},myItem:function(a){return"/my/item/"+a},recommendChannel:function(a){return"/recommend/channel/"+a},recommendItem:function(a){return"/recommend/item/"+a},auth:{qq:{auth:"https://graph.qq.com/oauth2.0/authorize",callback:"/auth/qq",getId:"https://graph.qq.com/oauth2.0/me"}}};c.exports={api:d,page:e}}),define("nireader/nireader-fe/2.1.0/kit/notice",["nireader/nireader-fe/2.1.0/template/common/notice","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num","nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/effect","nireader/nireader-fe/2.1.0/template/common/loader"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/common/notice"),e=a("nireader/nireader-fe/2.1.0/kit/customEvent"),f=a("nireader/nireader-fe/2.1.0/kit/effect"),g=$("#notice"),h=!1,i=function(){h||(f.bodyBlur(),f.headerBlur(),f.floaterBlur(),g.show(),h=!0)},j=function(){h&&(f.bodyUnblur(),f.headerUnblur(),f.floaterUnblur(),g.hide(),h=!1)},k=function(){g.html("")},l=function(a){"object"==typeof a&&(a=JSON.stringify(a));var b={word:a};g.html(d({notice:b})),i()},m=function(a){g.find("#confirm").on("click",function(){j(),a&&a()})},n=function(a,b){l(a),m(b)},o=function(){k(),j()};c.exports={clean:o,notice:n,visible:function(){return h},NotFound:function(){n("走错地方了。",function(){e.trigger("goback")})}}}),define("nireader/nireader-fe/2.1.0/template/common/notice",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<p class="word"><%==notice.word%></p><p class="op"><button id="confirm">嗯</button></p>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/template",["nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/kit/time").format;template.helper("formatTime",d),c.exports=template}),define("nireader/nireader-fe/2.1.0/kit/time",["nireader/nireader-fe/2.1.0/kit/num"],function(a,b){var c=a("nireader/nireader-fe/2.1.0/kit/num").toLength,d=function(){var a=new Date;return a.setMilliseconds(0),a.setSeconds(0),a.setMinutes(0),a.setHours(0),a},e=(new Date).getFullYear(),f=d();setInterval(function(){e=(new Date).getFullYear(),f=d()},6e4);var g=function(a,b){var c=new Date(a.valueOf());return c.setDate(c.getDate()-b),c},h=["今天","昨天","天前"],i=["零","一","两","三","四","五"],j=function(a){if(a>f)return h[0];if(a>g(f,1))return h[1];for(var b=2;5>=b;b++)if(a>g(f,b))return i[b]+h[2];var d="",j=a.getFullYear(),k=c(a.getMonth()+1,2),l=c(a.getDate(),2);return j!==e&&(d+=j+"年"),d+=k+"月"+l+"日"},k=function(a){return c(a.getHours(),2)+":"+c(a.getMinutes(),2)},l=function(a,b){if(null===a||void 0===a)return"我所不知道的某一天";var c=new Date(a);return b=void 0===b?"":b,j(c)+b+k(c)};b.formatDate=j,b.formatDay=k,b.format=l}),define("nireader/nireader-fe/2.1.0/kit/num",[],function(a,b){var c=function(a,b){var c=(a+"").slice(0,b);if(c.length<b)for(var d=c.length;b>d;d++)c="0"+c;return c},d=function(a,b){("number"!=typeof b||1>b)&&(b=1);var c=a.toFixed(b),d=/[0]+$/,e=/\.$/;return c.replace(d,"").replace(e,"")},e=function(a,b){a=a||0,b=b||100;var c=Math.random()*(b-a);return Math.floor(c+a)};b.toLength=c,b.format=d,b.random=e}),define("nireader/nireader-fe/2.1.0/kit/effect",["nireader/nireader-fe/2.1.0/template/common/loader","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=$("#body"),e=$("#header"),f=$("#floater");$("body").prepend(a("nireader/nireader-fe/2.1.0/template/common/loader")());var g=$("#loader"),h={},i=function(a){return h[a]=h[a]||0,h[a]=h[a]>0?h[a]-1:0,h[a]},j=function(a){return h[a]=h[a]||0,h[a]++,h[a]},k=function(a){return h[a]=0,h[a]},l=function(){j("bodyBlur"),d.addClass("blur"),t()},m=function(a){(a?k:i)("bodyBlur")||d.removeClass("blur"),u(a)},n=function(){j("bodyLoading"),g.show(),l()},o=function(a){(a?k:i)("bodyLoading")||g.hide(),m(a)},p=function(){j("headerBlur"),e.addClass("blur")},q=function(a){(a?k:i)("headerBlur")||e.removeClass("blur")},r=function(){j("floaterBlur"),f.addClass("blur")},s=function(a){(a?k:i)("floaterBlur")||f.removeClass("blur")},t=function(){j("bodyTransparent"),d.addClass("half-transparent")},u=function(a){(a?k:i)("bodyTransparent")||d.removeClass("half-transparent")};c.exports={bodyBlur:l,bodyUnblur:m,bodyLoading:n,bodyUnloading:o,headerBlur:p,headerUnblur:q,floaterBlur:r,floaterUnblur:s}}),define("nireader/nireader-fe/2.1.0/template/common/loader",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<div id="loader" class="loader" style="<% if(size){ %>width:<%=size%>px;height:<%=size%>px;<% } %>"></div>',f=d.compile(e);c.exports=function(a){return a=a||{},f(a)}}),define("nireader/nireader-fe/2.1.0/kit/userinfo",["nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/interface/index"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/kit/cookie"),e=a("nireader/nireader-fe/2.1.0/kit/request"),f=a("nireader/nireader-fe/2.1.0/kit/cache"),g=a("nireader/nireader-fe/2.1.0/interface/index"),h=g.api;g.page;var i="WhoAmI",j=function(a){a&&a(!!d.get(i))},k=function(a){e.get(h.auth.out,function(b){f.clear(),a&&a(b)})};c.exports={isLogin:j,logout:k}}),define("nireader/nireader-fe/2.1.0/kit/cookie",[],function(a,b){var c=function(a){return new RegExp('^[^\\x00-\\x20\\x7f\\(\\)<>@,;:\\\\\\"\\[\\]\\?=\\{\\}\\/\\u0080-\\uffff]+$').test(a)},d=function(a){if(c(a)){var b=new RegExp("(^| )"+a+"=([^;]*)(;|$)"),d=b.exec(document.cookie);if(d)return d[2]||null}return null},e=function(a){var b=d(a);return"string"==typeof b?b=decodeURIComponent(b):null};b.get=e}),define("nireader/nireader-fe/2.1.0/kit/eventList",[],function(a,b,c){var d={},e=function(a){a+=(Math.random()+"").slice(2);var b=d[a]=[];return LOG("create eventList: ",a),{name:a,list:b,add:function(a,c,d){for(var e=b.length-1;e>=0;e--)if(b[e].dom===a&&b[e].event===c&&b[e].handler===d)return;try{a.on(c,d),b.push({dom:a,event:c,handler:d}),LOG("add event: ",c," to ",this)}catch(f){console.log(f.stack)}return b},remove:function(a,c,d){for(var e=b.length-1;e>=0;e--)if(b[e].dom===a&&b[e].event===c&&b[e].handler===d){try{a.off(c,d),b.splice(e,1),LOG("remove event: ",c," from ",this)}catch(f){console.log(f.stack)}break}},clean:function(){LOG("clean eventList: ",this);for(var c,e=b.length-1;e>=0;e--)try{c=b[e],c.dom.off(c.event,c.handler)}catch(f){console.log(f.stack)}b=d[a]=[],delete d[a]}}};c.exports={create:e}}),define("nireader/nireader-fe/2.1.0/template/home/title",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e="<%=user.name%>";c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/home/info",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<% if(user.description){ %><span class="mr20 ml150" title="<%=user.description%>"><%=user.description%></span><% } %><% if(user.homepage){ %><a class="mr20" href="<%=user.homepage%>" target="_blank" title="站点">站点</a><% } %>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/home/subscriptionList",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<ul id="subscription-list" class="item-list"><%if(subscriptions && subscriptions.length > 0){%><h6 class="sub-title">订阅：</h6><%for(i = 0; i < subscriptions.length; i ++) {%><li class="item" data-id="<%=subscriptions[i].id%>" data-news="<%=subscriptions[i].news%>"><a data-link-async="true" href="<%=subscriptions[i].pageUrl%>"><%=subscriptions[i].title%><span class="pubdate"><%="更新于" + formatTime(subscriptions[i].pubDate, " ")%></span></a></li><%}%><%}else{%><h6 class="sub-title">没有订阅，</h6><%}%></ul>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/home/recommendList",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<h6 class="sub-title">推荐：</h6><ul id="recommend-list" class="item-list"><%for(i = 0; i < recommends.length; i ++) {%><li class="item" data-id="<%=recommends[i].id%>"><a data-link-async="true" href="<%=recommends[i].pageUrl%>"><%=recommends[i].title%><span class="pubdate"><%="更新于" + formatTime(recommends[i].pubDate, " ")%></span></a></li><%}%></ul>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/home/channelInfo",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<h3 class="channel-title"><%=channel.title%><i id="channel-subscribed" class="icon-eye-<%=channel.subscribed?"open":"close"%>" title="<%=channel.subscribed?"已订阅":"未订阅"%>"></i></h3><p class="channel-description"><%=channel.description%></p><p class="channel-generator"><%=channel.generator%></p>';
c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/content/entrance",["nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/notice","nireader/nireader-fe/2.1.0/template/common/notice","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num","nireader/nireader-fe/2.1.0/kit/effect","nireader/nireader-fe/2.1.0/template/common/loader","nireader/nireader-fe/2.1.0/kit/userinfo","nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/interface/index","nireader/nireader-fe/2.1.0/kit/eventList","nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/template/common/loadingIcon"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/kit/request"),e=a("nireader/nireader-fe/2.1.0/kit/customEvent"),f=a("nireader/nireader-fe/2.1.0/kit/notice").notice,g=a("nireader/nireader-fe/2.1.0/kit/userinfo"),h=a("nireader/nireader-fe/2.1.0/kit/eventList"),i=a("nireader/nireader-fe/2.1.0/kit/url"),j=a("nireader/nireader-fe/2.1.0/interface/index"),k=a("nireader/nireader-fe/2.1.0/config").auth,l=j.api,m=j.page,n=a("nireader/nireader-fe/2.1.0/template/common/loadingIcon")(),o=$("title"),p=function(){e.trigger("goto",m.home)},q=function(a){this.url=a.url,this.eventList=h.create("content/entrance"),this.type="entrance"};q.prototype.init=function(){g.isLogin(function(a){a&&p()}),this.prepareInfo(),o.text("Welcome"),this.dealLinks(),this.bindEvent()},q.prototype.dealLinks=function(){this.doms.topLink.hide(),this.doms.leftLink.hide(),this.doms.rightLink.hide()},q.prototype.bindEvent=function(){var a=this,b=this.doms,c=function(a,c){b.status.html(a+(c?" "+n:""))};this.eventList.add(b.qq,"click",function(){var a=k.qq,b=m.auth.qq.auth,e=encodeURIComponent(i.complete(m.auth.qq.callback));b+="?response_type=token",b+="&client_id="+a.clientId,b+="&redirect_uri="+e,b+="&scope="+a.scope,c("在新页面中授权"),window.finishAuth=function(a){var b=m.auth.qq.getId;b+="?access_token="+a.access_token,window.callback=function(b){c("登录",!0),d.post({username:b.openid,password:a.access_token,thirdParty:"qq"},l.auth.in,function(a,b){return a?(f(b),void 0):(c("登录成功",!0),p(),void 0)}),delete window.callback};var e=document.createElement("script");e.src=b,document.body.appendChild(e),c("获取基本信息",!0),delete window.finishAuth},window.open(b)}),this.eventList.add(b.submit,"click",function(){a.signIn()}),this.eventList.add(b.passwordIN,"keyup",function(b){13===b.which&&a.signIn()})},q.prototype.signIn=function(){var a=this.doms.nameIn.val(),b=this.doms.passwordIN.val();if(a&&b){var c=this.doms.status,e=function(a,b){c.html(a+(b?" "+n:""))};e("登录",!0),d.post({username:a,password:b},l.auth.in,function(a){return a?(f("错了。"),void 0):(e("登录成功",!0),p(),void 0)})}},q.prototype.clean=function(){this.eventList.clean(),this.doms.wrapper.animate({marginTop:-this.doms.wrapper.height()+"px"},1e3,function(){$(this).hide()})},q.prototype.prepareInfo=function(){this.doms={wrapper:$("#header"),leftLink:$("#left-link"),rightLink:$("#right-link"),topLink:$("#top-link"),signin:$("#signin"),signinBlock:$("#signin-block"),nameIn:$("#name-in"),passwordIN:$("#password-in"),submit:$("#submit"),qq:$("#qq"),status:$("#status")}},c.exports=q}),define("nireader/nireader-fe/2.1.0/template/common/loadingIcon",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<i class="icon-spinner icon-spin" style="<% if(size){ %>font-size:<%=size*2%>px;<% } %>"></i>',f=d.compile(e);c.exports=function(a){return a=a||{},f(a)}}),define("nireader/nireader-fe/2.1.0/content/channel",["nireader/nireader-fe/2.1.0/module/floater","nireader/nireader-fe/2.1.0/kit/keypress","nireader/nireader-fe/2.1.0/kit/pattern","nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/resource","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/interface/index","nireader/nireader-fe/2.1.0/kit/notice","nireader/nireader-fe/2.1.0/template/common/notice","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num","nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/effect","nireader/nireader-fe/2.1.0/template/common/loader","nireader/nireader-fe/2.1.0/kit/customLink","nireader/nireader-fe/2.1.0/module/cmd","nireader/nireader-fe/2.1.0/kit/userinfo","nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/template/common/loadingIcon","nireader/nireader-fe/2.1.0/template/common/result","nireader/nireader-fe/2.1.0/template/common/tip","nireader/nireader-fe/2.1.0/kit/eventList","nireader/nireader-fe/2.1.0/template/channel/title","nireader/nireader-fe/2.1.0/template/channel/info","nireader/nireader-fe/2.1.0/template/channel/itemList"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/module/floater"),e=a("nireader/nireader-fe/2.1.0/kit/resource"),f=a("nireader/nireader-fe/2.1.0/kit/request"),g=a("nireader/nireader-fe/2.1.0/interface/index"),h=g.page,i=g.api,j=a("nireader/nireader-fe/2.1.0/kit/url"),k=a("nireader/nireader-fe/2.1.0/kit/eventList"),l=a("nireader/nireader-fe/2.1.0/kit/notice"),m=a("nireader/nireader-fe/2.1.0/kit/customEvent"),n=a("nireader/nireader-fe/2.1.0/kit/effect"),o=a("nireader/nireader-fe/2.1.0/kit/keypress"),p=a("nireader/nireader-fe/2.1.0/kit/userinfo"),q=a("nireader/nireader-fe/2.1.0/template/channel/title"),r=a("nireader/nireader-fe/2.1.0/template/channel/info"),s=a("nireader/nireader-fe/2.1.0/template/channel/itemList"),t=$("title"),u="/my/",v="/recommend/",w=function(a){this.url=a.url,this.wrapper=a.wrapper,this.eventList=k.create("content/channel"),this.type="channel"};w.prototype.init=function(){this.prepareInfo(),this.getItemListByPage(1),this.getChannelInfo();var a=this;p.isLogin(function(b){b?a.getNeighbourInfo():a.data.inSubscription?m.trigger("goto",a.url.slice(u.length-1)):a.dealNoUserinfo()}),this.bindEvent(),this.markRead()},w.prototype.markRead=function(){f.post({subscribee:this.data.id},i.subscription.read,function(a){a||e.list("subscription",null,null,null,null,null,!0)})},w.prototype.bindEvent=function(){var a=this.doms.leftLink,b=this.doms.rightLink;this.eventList.add(o,o.code.left,function(){!d.visible()&&a.click()}),this.eventList.add(o,o.code.right,function(){!d.visible()&&b.click()})},w.prototype.clean=function(){this.eventList.clean(),this.doms.sideContent.html(""),this.doms.sideBlock.clearQueue().stop().hide(),this.doms.leftLink.attr("href",""),this.doms.rightLink.attr("href",""),this.doms.topLink.attr("href",""),n.bodyLoading()},w.prototype.prepareInfo=function(){var a=this;a.data={id:parseInt(j.parse(a.url).id,10),inSubscription:0===a.url.indexOf(u),inRecommend:0===a.url.indexOf(v)},a.doms={wrapper:a.wrapper,middleBlock:a.wrapper.find("#middle-block"),title:a.wrapper.find("#title"),info:a.wrapper.find("#info"),content:a.wrapper.find("#content"),sideBlock:a.wrapper.find("#side-block"),sideContent:a.wrapper.find("#side-content"),leftLink:a.wrapper.find("#left-link"),rightLink:a.wrapper.find("#right-link"),topLink:a.wrapper.find("#top-link")},a.getItemListByPage=e.makeList("item",{source:a.data.id},function(b,c){return b?(console.error(b),void 0):(a.dealItemList(c),void 0)})},w.prototype.getChannelInfo=function(){var a=this;e.get("channel",{id:a.data.id},function(b,c){return b?(404==b.status?l.NotFound():LOG(b),void 0):(a.dealChannelInfo(c),void 0)})},w.prototype.dealChannelInfo=function(a){this.data.channel=a,this.renderChannelInfo({channel:a})},w.prototype.getNeighbourInfo=function(){var a=this,b=a.data.inSubscription?"subscription":"channel",c=a.data.inRecommend?{order:"score",descrease:!0}:null;e.list(b,null,null,function(b,c){if(b||c.length<1)return l.notice("无法获取频道列表"),LOG(b),void 0;for(var d=-1,e=0,f=c.length;f>e;e++)if(parseInt(c[e].id,10)===a.data.id){d=e;break}return-1===d?(a.data.inSubscription?m.trigger("goto",a.url.slice(u.length-1)):l.NotFound(),void 0):(a.dealNeighbourInfo({prev:c[d-1],next:c[d+1]}),void 0)},c)},w.prototype.dealNeighbourInfo=function(a){this.doms.topLink.attr("href",h.home).attr("title","Home");var b=h.channel;b=this.data.inSubscription?h.myChannel:b,b=this.data.inRecommend?h.recommendChannel:b,a.prev?this.doms.leftLink.attr("href",b(a.prev.id)).attr("title",a.prev.title).show():this.doms.leftLink.hide(),a.next?this.doms.rightLink.attr("href",b(a.next.id)).attr("title",a.next.title).show():this.doms.rightLink.hide()},w.prototype.dealNoUserinfo=function(){this.doms.topLink.attr("href",h.home).attr("title","Home"),this.doms.leftLink.hide(),this.doms.rightLink.hide()},w.prototype.dealItemList=function(a){var b=this.data.inSubscription?h.myItem:h.recommendItem;a.map(function(a){return a.pageUrl=b(a.id),a}),this.data.items=a,this.renderItemList({items:a})},w.prototype.renderChannelInfo=function(a){var b=this;b.doms.title.html(q(a)),b.doms.info.html(r(a)),t.text(a.channel.title),b.doms.vote=b.doms.info.find("#vote"),b.doms.voteNum=b.doms.info.find("#vote-num"),b.doms.vote.on("click",function(a){a.preventDefault();var c=$(this).find("i");c.removeClass("icon-thumbs-up-alt").addClass("icon-spinner icon-spin"),f.post({cid:b.data.id},i.channel.vote,function(a){return c.removeClass("icon-spinner icon-spin"),a?(c.addClass("icon-frown"),setTimeout(function(){c.removeClass("icon-frown").addClass("icon-thumbs-up-alt")},1e3),void 0):(c.addClass("icon-ok"),b.doms.voteNum.text("["+ ++b.data.channel.score+"]"),e.refresh("channel",{id:b.data.id}),e.makeList("channel",null,null,{order:"score",descrease:!0},null,!0)(1),setTimeout(function(){c.removeClass("icon-ok").hide()},1e3),void 0)})})},w.prototype.sideBlockLoading=function(){this.doms.sideBlock.addClass("loading")},w.prototype.sideBlockLoad=function(a){this.doms.sideBlock.removeClass("loading"),this.doms.sideContent.html(a)},w.prototype.sideBlockGoto=function(a){var b=a.offset().top+this.doms.middleBlock.scrollTop(),c=parseInt(this.doms.sideBlock.css("top"),10);this.doms.sideBlock.stop().clearQueue().show().delay(200).animate({top:(6*b-c)/5},100).animate({top:b},50)},w.prototype.renderItemList=function(a){var b=this;b.doms.content.html(s(a)),n.bodyUnloading();var c;this.eventList.add(b.doms.content.find(".item"),"mouseenter",function(){c&&(c=clearTimeout(c));var a=$(this),d=parseInt(a.attr("data-id"),10);b.doms.sideBlock.attr("data-iid",d),b.sideBlockGoto(a),b.sideBlockLoading(),e.get("item",{id:d},function(a,c){return b.doms.sideBlock.attr("data-iid")==d?a?(b.sideBlockLoad("Get item info failed."),void 0):(b.sideBlockLoad(c.content),void 0):void 0})}),this.eventList.add(b.doms.content,"mouseleave",function(){c=setTimeout(function(){b.doms.sideBlock.hide()},200)})},c.exports=w}),define("nireader/nireader-fe/2.1.0/module/floater",["nireader/nireader-fe/2.1.0/kit/keypress","nireader/nireader-fe/2.1.0/kit/pattern","nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/resource","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/interface/index","nireader/nireader-fe/2.1.0/kit/notice","nireader/nireader-fe/2.1.0/template/common/notice","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num","nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/effect","nireader/nireader-fe/2.1.0/template/common/loader","nireader/nireader-fe/2.1.0/kit/customLink","nireader/nireader-fe/2.1.0/module/cmd","nireader/nireader-fe/2.1.0/kit/userinfo","nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/template/common/loadingIcon","nireader/nireader-fe/2.1.0/template/common/result","nireader/nireader-fe/2.1.0/template/common/tip"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/kit/keypress"),e=a("nireader/nireader-fe/2.1.0/kit/pattern"),f=a("nireader/nireader-fe/2.1.0/kit/request"),g=a("nireader/nireader-fe/2.1.0/kit/resource");a("nireader/nireader-fe/2.1.0/kit/notice").notice;var h=a("nireader/nireader-fe/2.1.0/kit/url"),i=a("nireader/nireader-fe/2.1.0/kit/customEvent"),j=a("nireader/nireader-fe/2.1.0/kit/customLink"),k=a("nireader/nireader-fe/2.1.0/kit/effect"),l=a("nireader/nireader-fe/2.1.0/module/cmd"),m=a("nireader/nireader-fe/2.1.0/interface/index"),n=m.api,o=m.page,p=a("nireader/nireader-fe/2.1.0/template/common/result"),q=a("nireader/nireader-fe/2.1.0/template/common/tip"),r=a("nireader/nireader-fe/2.1.0/template/common/loadingIcon")();$("#body");var s,t,u,v,w=$("#floater"),x=$("#input"),y=$("#tips"),z=$("#results"),A=function(){s=x.val().trim()},B=function(){x.val(""),x.focus(),T(),y.hide(),z.hide()},C=function(){t||(k.bodyBlur(),k.headerBlur(),w.addClass("show"),B(),A(),t=!0)},D=function(){t&&(k.bodyUnblur(),k.headerUnblur(),w.removeClass("show"),t=!1)},E=function(){w.hasClass("show")?D():C()},F=function(){i.trigger("userInfoUpdate")},G=function(){z.html("").hide()},H=function(){y.html("").hide()},I=function(){H(),G()},J=function(a){y.show().prepend(q({tip:{word:a}}))},K=function(a){H(),J(a)},L=function(a,b,c){b=b||"javascript:;";var d=h.isSameDomain(b)?"":"_blank";z.show().append(p({result:{word:a,link:b,target:d,async:c}}))},M={add:J,show:K,clean:H},N={add:L,clean:G},O=function(a,b){f.post({url:a},n.channel.create,b)},P=function(a,b){f.post({channel:a},n.channel.save,b)},Q=function(a,b){f.post({subscribee:a,description:""},n.subscription.add,b)},R=function(){var a=x.val();K("好像是个rss地址，等我解析下... "+r),O(a,function(b,c){if(a===s){if(I(),b)return K("没解析出来，地址不对。"),void 0;var d=!!c.id;K("用<b>Enter</b>"+(d?"":"添加并")+"订阅"),L(c.title,d?o.channel(c.id):c.link,d),u=function(){P(c,function(a,b){return a?(K("没添加成功。"),void 0):(K(b.title+"添加好了，正在订阅... "+r),Q(b.id,function(a){return a?(K("订阅"+b.title+"没成功。（"+a+"）"),void 0):(G(),K("订阅了"+b.title+"。"),F(),void 0)}),void 0)})}}})},S=function(a){if(a){for(var b=a.split(" "),c=[],d=0,e=b.length;e>d;d++)b[d]&&c.push(b[d]);if(!c.length)return;g.search("channel",c,1,function(b,c){if(a===s&&!b)for(var d=0,e=c.length;e>d;d++)L(c[d].title,o.channel(c[d].id),!0)})}},T=function(){var a=x.val().trim();if(a!=s){s=a,I(),u=v=null;var b;if(a&&(b=l[a]))return b.usage&&K("按<b>Enter</b>"+b.usage+"。"),u=b.handler(a,M,N),void 0;if(a&&e.url.test(a))return R(),void 0;var c,b,d=[];if(a){for(var f in l)l.hasOwnProperty(f)&&(c=f.indexOf(a))>=0&&!l[f].nohint&&d.push({cmd:f,pos:c});var g=3,h=(g<d.length?g:d.length)-1;d.slice(0,g).sort(function(a,b){return a.pos<b.pos}).forEach(function(c,d){var e=c.cmd,f=c.pos,g=e.slice(0,f)+"<b>"+a+"</b>"+e.slice(f+a.length);d===h&&(g+="	 ---- 用<b>Tab</b>补全",b=e),J(g)})}v=b&&function(){x.val(b)},S(a)}};x.on("keydown",function(a){9===a.which&&(a.preventDefault(),v&&!v(a))}),x.on("keyup",function(a){return 13===a.which&&u&&!u(a)?(x.val(""),void 0):(T(),void 0)}),d.register(27,function(){E()}),j.on("global-input",function(a){x.val(a),x.focus(),T()}),c.exports={visible:function(){return t}}}),define("nireader/nireader-fe/2.1.0/kit/keypress",[],function(a,b,c){var d={},e={left:37,up:38,right:39,down:40,enter:13,backspace:8},f=function(a,b,c){var d=a+"";return d+=b?"+ctrl":"",d+=c?"+alt":""},g=function(a,b,c,e){var g=f(a,c,e);d[g]=d[g]||[],d[g].push(b)},h=function(a,b,c,e){var g,h,i=f(a,c,e);(g=d[i])&&(h=g.indexOf(b))>=0&&g.splice(h,1)},i=function(a,b,c,e){var g=f(a,b,c);if(d[g])for(var h=d[g],i=0,j=h.length;j>i;i++)try{h[i](e)}catch(e){LOG(e),LOG(e.stack)}};$("body").on("keyup",function(a){return LOG("keypress",a.which,a.ctrlKey,a.altKey,a),i(a.which,a.ctrlKey,a.altKey,a),!1});var j=function(a,b){return(a="number"==typeof a?{which:a}:a)?g(a.which,b,a.ctrl,a.alt):void 0},k=function(a,b){return(a="number"==typeof a?{which:a}:a)?h(a.which,b,a.ctrl,a.alt):void 0};c.exports={register:g,unregister:h,on:j,off:k,trigger:i,code:e}}),define("nireader/nireader-fe/2.1.0/kit/pattern",[],function(a,b,c){var d=/[a-z]+\:\/\/[\w]+\.[\w]+/;c.exports={url:d}}),define("nireader/nireader-fe/2.1.0/kit/customLink",[],function(a,b,c){var d={},e="nireader";protocolPrefix=e+"://",protocolPrefixLen=protocolPrefix.length,c.exports={on:function(a,b){var c=d[a]=d[a]||[];c.indexOf(b)>=0||c.push(b)},off:function(a,b){var c,e;(c=d[a])&&(e=c.indexOf(b))>=0&&c.splice(e,1)},trigger:function(a){var b;if(b=d[a])for(var c=0,e=b.length;e>c;c++)try{b[c].apply(null,Array.prototype.slice.call(arguments,1))}catch(f){console.log(f.stack)}},enable:function(){var a=this;$(document).delegate("[href]","click",function(b){var c=$(this);if(0===(c=c.attr("href")).indexOf(protocolPrefix)){b.preventDefault();var d=c.slice(protocolPrefixLen).split(".").map(function(a){a=decodeURIComponent(a);try{a=JSON.parse(a)}catch(b){}return a});a.trigger.apply(a,d)}})}},c.exports.enable()}),define("nireader/nireader-fe/2.1.0/module/cmd",["nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/userinfo","nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/interface/index","nireader/nireader-fe/2.1.0/template/common/loadingIcon","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/kit/customEvent"),e=a("nireader/nireader-fe/2.1.0/kit/userinfo"),f=a("nireader/nireader-fe/2.1.0/kit/cache"),g=a("nireader/nireader-fe/2.1.0/interface/index"),h=g.page,i=a("nireader/nireader-fe/2.1.0/template/common/loadingIcon")(),j=function(a,b,c){return function(){b.show("正在获取... "+i),setTimeout(function(){for(var a in o)if(o.hasOwnProperty(a)&&!o[a].nohint){var d=o[a].usage?'<span class="add-on">[ '+o[a].usage+" ]</span>":"";c.add('<span class="code-font">'+a+"</span>"+d,"nireader://global-input."+a)}b.clean()},300)}},k=function(a,b){return function(){b.show("正在登出... "+i),e.logout(function(a){return a?(notice("出错了。"),LOG(a),void 0):(location.href=h.home,void 0)})}},l=function(a,b){return function(){b.show("正在去首页... "+i),d.trigger("goto","/"),b.clean()}},m=function(a,b,c){return function(){b.show("正在计算... "+i);var a=f.getSize();setTimeout(function(){c.add(["共",a.num,"条缓存记录"].join(" ")),c.add(["占用存储空间",a.MB,"MB"].join(" ")),b.clean()},300)}},n=function(a,b){return function(){b.show("正在清除缓存... "+i);var a=f.getSize().MB+"MB";f.clear();var c=f.getSize().MB+"MB";setTimeout(function(){b.show("缓存已清空。（"+a+"->"+c+"）")},300)}},o=c.exports={cmd:{usage:"查看所有命令",handler:j},logout:{usage:"登出",handler:k},home:{usage:"去首页 ('/')",handler:l},cache:{usage:"查看缓存统计",handler:m},nocache:{usage:"清除缓存",handler:n},nighca:{nohint:!0,handler:function(a,b,c){return function(){c.add(">_<..."),location.href="http://nighca.me/nighca/"}}},wendell:{nohint:!0,handler:function(a,b,c){return function(){c.add("^_^"),location.href="http://weibo.com/u/2465510480"}}}}}),define("nireader/nireader-fe/2.1.0/template/common/result",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<li class="result"><a href="<%=result.link%>" target="<%=result.target%>" <%=result.async?"data-link-async=true":""%>><%==result.word%></a></li>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/common/tip",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<li class="tip"><%==tip.word%></li>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/channel/title",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e="<%=channel.title%>";c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/channel/info",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<% if(channel.description){ %><span class="mr20 ml150" title="<%=channel.description%>"><%=channel.description%></span><% } %><span class="mr20">更新于<%=formatTime(channel.pubDate)%></span><a class="mr20" href="<%=channel.link%>" target="_blank" title="站点">站点</a><span id="vote-num" class="mr10" title="被推荐<%=channel.score%>次">[<%=channel.score%>]</span><span id="vote" class="vote" title="推荐"><i class="icon-thumbs-up-alt"></i></span>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/channel/itemList",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<ul class="item-list"><%for(i = 0; i < items.length; i ++) {%><li class="item" data-id="<%=items[i].id%>"><a data-link-async="true" href="<%=items[i].pageUrl%>"><%=items[i].title%><span class="pubdate"><%=formatTime(items[i].pubDate, " ")%></span></a></li><%}%></ul>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/content/item",["nireader/nireader-fe/2.1.0/module/floater","nireader/nireader-fe/2.1.0/kit/keypress","nireader/nireader-fe/2.1.0/kit/pattern","nireader/nireader-fe/2.1.0/kit/request","nireader/nireader-fe/2.1.0/kit/resource","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/kit/url","nireader/nireader-fe/2.1.0/interface/index","nireader/nireader-fe/2.1.0/kit/notice","nireader/nireader-fe/2.1.0/template/common/notice","nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num","nireader/nireader-fe/2.1.0/kit/customEvent","nireader/nireader-fe/2.1.0/kit/effect","nireader/nireader-fe/2.1.0/template/common/loader","nireader/nireader-fe/2.1.0/kit/customLink","nireader/nireader-fe/2.1.0/module/cmd","nireader/nireader-fe/2.1.0/kit/userinfo","nireader/nireader-fe/2.1.0/kit/cookie","nireader/nireader-fe/2.1.0/template/common/loadingIcon","nireader/nireader-fe/2.1.0/template/common/result","nireader/nireader-fe/2.1.0/template/common/tip","nireader/nireader-fe/2.1.0/kit/eventList","nireader/nireader-fe/2.1.0/template/item/title","nireader/nireader-fe/2.1.0/template/item/info","nireader/nireader-fe/2.1.0/template/item/content","nireader/nireader-fe/2.1.0/template/item/channelTitle","nireader/nireader-fe/2.1.0/kit/testScroll"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/module/floater"),e=a("nireader/nireader-fe/2.1.0/kit/resource"),f=a("nireader/nireader-fe/2.1.0/interface/index").page,g=a("nireader/nireader-fe/2.1.0/kit/url"),h=a("nireader/nireader-fe/2.1.0/kit/eventList"),i=a("nireader/nireader-fe/2.1.0/kit/notice");a("nireader/nireader-fe/2.1.0/kit/customEvent");var j=a("nireader/nireader-fe/2.1.0/kit/effect"),k=a("nireader/nireader-fe/2.1.0/kit/keypress"),l=a("nireader/nireader-fe/2.1.0/template/item/title"),m=a("nireader/nireader-fe/2.1.0/template/item/info"),n=a("nireader/nireader-fe/2.1.0/template/item/content"),o=a("nireader/nireader-fe/2.1.0/template/item/channelTitle"),p=$("title"),q="/my/",r="/recommend/",s=a("nireader/nireader-fe/2.1.0/kit/testScroll"),t=s.bottom,u=s.top,v=function(a){this.url=a.url,this.wrapper=a.wrapper,this.eventList=h.create("content/item"),this.type="item"};v.prototype.init=function(){var a=this;a.prepareInfo(),a.getItemInfo(function(){a.getChannelInfo(),a.getNeighbourInfo(function(){a.preloadNeighbours()})}),a.bindEvent()},v.prototype.bindEvent=function(){var a=this.data,b=this.doms.middleBlock,c=this.doms.leftLink,e=this.doms.rightLink,f=this.doms.upButton,g=300,h=this.eventList.add.bind(this.eventList),i=this.eventList.remove.bind(this.eventList);this.doms.content.find("a").each(function(a,b){b=$(b),b.attr("data-link-async")||b.attr("target","_blank")}),h(f,"click",function(a){a.preventDefault(),f.animate({marginTop:"8px"},100,function(){b.animate({scrollTop:0},100,function(){f.css({marginTop:0})})})}),h(b,"scroll",function(){i(b,"mousewheel",j),i(b,"mousewheel",l);var a=b[0],c=40,d=60,e=a.scrollTop/(a.scrollHeight-a.clientHeight),g=e*(a.clientHeight-c-d-f.height())+c+"px",h=e;f.text(Math.floor(100*e)+"%").css({top:g,opacity:h})});var j=function(a,b,d,e){e>0&&"none"!==c.css("display")&&c.click()},l=function(a,b,c,d){0>d&&"none"!==e.css("display")&&e.click()},m=!0;setTimeout(function(){h(b,"mousewheel",function(c,d,e,f){return m?(m=!1,void 0):(f>0&&u(b)&&(a.timer1=a.timer1||setTimeout(function(){h(b,"mousewheel",j),a.timer1=null},g)),0>f&&t(b)&&(a.timer2=a.timer2||setTimeout(function(){h(b,"mousewheel",l),a.timer2=null},g)),void 0)})},200),h(k,k.code.left,function(){!d.visible()&&c.click()}),h(k,k.code.right,function(){!d.visible()&&e.click()})},v.prototype.clean=function(){this.eventList.clean(),this.doms.upButton.remove(),clearTimeout(this.data.timer),clearTimeout(this.data.timer1),clearTimeout(this.data.timer2),this.doms.leftLink.attr("href",""),this.doms.rightLink.attr("href",""),this.doms.topLink.attr("href",""),j.bodyLoading()},v.prototype.prepareInfo=function(){var a=this;a.data={id:parseInt(g.parse(a.url).id,10),inSubscription:0===a.url.indexOf(q),inRecommend:0===a.url.indexOf(r)},a.doms={wrapper:a.wrapper,middleBlock:a.wrapper.find("#middle-block"),title:a.wrapper.find("#title"),info:a.wrapper.find("#info"),content:a.wrapper.find("#content"),leftLink:a.wrapper.find("#left-link"),rightLink:a.wrapper.find("#right-link"),topLink:a.wrapper.find("#top-link")};var b=document.createElement("div");b.className="up-button",a.doms.wrapper.append(b),a.doms.upButton=$(b)},v.prototype.getItemInfo=function(a){var b=this;e.get("item",{id:b.data.id},function(c,d){return c?(404==c.status?i.NotFound():LOG(c),void 0):(b.dealItemInfo(d),a&&a(),void 0)})},v.prototype.getChannelInfo=function(){var a=this;e.get("channel",{id:a.data.item.source},function(b,c){return b?(console.error(b||"Can not get channel"),void 0):(a.dealChannelInfo(c),void 0)})},v.prototype.preloadNeighbours=function(){var a;(a=this.data.neighbours.prev)&&e.get("item",{id:a.id}),(a=this.data.neighbours.next)&&e.get("item",{id:a.id})},v.prototype.dealItemInfo=function(a){this.data.item=a,this.renderItemInfo({item:a})},v.prototype.dealChannelInfo=function(a){var b=f.channel;b=this.data.inSubscription?f.myChannel:b,b=this.data.inRecommend?f.recommendChannel:b,a.pageUrl=b(a.id),this.data.channel=a,this.renderChannelInfo({channel:a})},v.prototype.getNeighbourInfo=function(a){var b=this;e.list("item",{source:b.data.item.source},null,function(c,d){if(c||d.length<1)return console.error(c||"Get aside item info fail."),void 0;for(var e=-1,f=0,g=d.length;g>f;f++)if(parseInt(d[f].id,10)===b.data.id){e=f;break}return-1===e?(i.NotFound(),void 0):(b.dealNeighbourInfo({prev:d[e-1],next:d[e+1]}),a&&a(),void 0)})},v.prototype.dealNeighbourInfo=function(a){this.data.neighbours=a;var b=f.item;b=this.data.inSubscription?f.myItem:b,b=this.data.inRecommend?f.recommendItem:b,a.prev?this.doms.leftLink.attr("href",b(a.prev.id)).attr("title",a.prev.title).show():this.doms.leftLink.hide(),a.next?this.doms.rightLink.attr("href",b(a.next.id)).attr("title",a.next.title).show():this.doms.rightLink.hide()},v.prototype.renderItemInfo=function(a){p.text(a.item.title),this.doms.title.html(l(a)),this.doms.info.html(m(a)),this.doms.content.html(n(a)),j.bodyUnloading()},v.prototype.renderChannelInfo=function(a){this.doms.topLink.attr("href",a.channel.pageUrl),this.doms.topLink.attr("title",a.channel.title),this.doms.info.prepend(o(a))},c.exports=v}),define("nireader/nireader-fe/2.1.0/template/item/title",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e="<%=item.title%>";c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/item/info",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<span class="mr40">于<%=formatTime(item.pubDate)%></span><a class="mr40" href="<%=item.link%>" target="_blank" title="原文">原文</a>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/item/content",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e="<%==item.content%>";c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/template/item/channelTitle",["nireader/nireader-fe/2.1.0/template/template","nireader/nireader-fe/2.1.0/kit/time","nireader/nireader-fe/2.1.0/kit/num"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/template/template"),e='<span class="">来自<a href="<%=channel.pageUrl%>" title="<%=channel.description%>" data-link-async=true ><%=channel.title%> </a></span>';c.exports=d.compile(e)}),define("nireader/nireader-fe/2.1.0/kit/testScroll",[],function(a,b){b.bottom=function(a){return a=a[0]||a,a&&a.scrollTop+a.clientHeight>=a.scrollHeight},b.top=function(a){return a=a[0]||a,a&&a.scrollTop<=0}}),define("nireader/nireader-fe/2.1.0/module/task",[],function(a,b,c){function d(a,b,c){var d=this;d.name=a,d.duration=c,d.repeat="number"==typeof d.duration,d.exec=function(){try{b.call(d,d)}catch(a){LOG(a)}}}d.prototype.run=function(){return this.timer||(this.exec(),this.repeat&&(this.timer=setInterval(this.exec,this.duration))),this},d.prototype.stop=function(){return this.timer=this.timer&&clearInterval(this.timer),this},d.list=[],d.add=function(a,b,c){var e;return e=a.constructor&&a.constructor===d?a:new d(a,b,c),this.list.push(e),this},d.runFrom=function(a,b){if(a="number"==typeof a?a:0,b="number"==typeof b?b:0,a>=this.list.length)return this;try{this.list[a].run()}catch(c){LOG(c)}var d=this;return setTimeout(function(){d.runFrom(++a,b)},b),this},d.run=d.runFrom,d.stop=function(){for(var a=0,b=this.list.length;b>a;a++)this.list[a].stop();return this},c.exports=d}),define("nireader/nireader-fe/2.1.0/module/tasks/logger",["nireader/nireader-fe/2.1.0/module/task","nireader/nireader-fe/2.1.0/kit/local"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/module/task"),e=a("nireader/nireader-fe/2.1.0/kit/local").create("logger");c.exports=new d("logger",function(){e.set("time",Date.now()),LOG("log",e.getAll())},6e4)}),define("nireader/nireader-fe/2.1.0/module/tasks/cacheManager",["nireader/nireader-fe/2.1.0/module/task","nireader/nireader-fe/2.1.0/config","nireader/nireader-fe/2.1.0/kit/cache","nireader/nireader-fe/2.1.0/kit/local"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/module/task"),e=a("nireader/nireader-fe/2.1.0/config").cache.manageInterval,f=a("nireader/nireader-fe/2.1.0/kit/cache");c.exports=new d("cacheManager",f.manage.bind(f),e)}),define("nireader/nireader-fe/2.1.0/module/tasks/breath",["nireader/nireader-fe/2.1.0/module/task"],function(a,b,c){var d=a("nireader/nireader-fe/2.1.0/module/task");c.exports=new d("breath",function(){$("#body").addClass("breath")})});
